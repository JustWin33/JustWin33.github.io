<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="一、修改网络配置 vi /etc/sysconfig/network-scripts/ifcfg-ens33\n2. 处理 NetworkManager 冲突 CentOS 7 中 NetworkManager 服务可能与传统网络服务冲突，执行以下命令关闭它：\n1 2 systemctl stop NetworkManager systemctl disable NetworkManager 重新启动一下就好了\nsystemctl restart network\n验证网络连通性 检查 IP 配置：ip addr 测试内网连通性：ping 192.168.200.2（网关地址） 测试外网连通性：ping www.baidu.com 如果仍有问题，可检查虚拟机网络模式（如 NAT 模式的网关是否与配置文件一致），或查看错误日志 journalctl -xe 进一步排查。\n"><title>修改网络配置</title><link rel=canonical href=http://localhost:1313/linux/%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="修改网络配置"><meta property='og:description' content="一、修改网络配置 vi /etc/sysconfig/network-scripts/ifcfg-ens33\n2. 处理 NetworkManager 冲突 CentOS 7 中 NetworkManager 服务可能与传统网络服务冲突，执行以下命令关闭它：\n1 2 systemctl stop NetworkManager systemctl disable NetworkManager 重新启动一下就好了\nsystemctl restart network\n验证网络连通性 检查 IP 配置：ip addr 测试内网连通性：ping 192.168.200.2（网关地址） 测试外网连通性：ping www.baidu.com 如果仍有问题，可检查虚拟机网络模式（如 NAT 模式的网关是否与配置文件一致），或查看错误日志 journalctl -xe 进一步排查。\n"><meta property='og:url' content='http://localhost:1313/linux/%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/'><meta property='og:site_name' content='JustWin'><meta property='og:type' content='article'><meta property='article:section' content='Linux'><meta property='article:published_time' content='2025-12-04T00:00:00+00:00'><meta property='article:modified_time' content='2025-12-04T00:00:00+00:00'><meta property='og:image' content='http://localhost:1313/'><meta name=twitter:title content="修改网络配置"><meta name=twitter:description content="一、修改网络配置 vi /etc/sysconfig/network-scripts/ifcfg-ens33\n2. 处理 NetworkManager 冲突 CentOS 7 中 NetworkManager 服务可能与传统网络服务冲突，执行以下命令关闭它：\n1 2 systemctl stop NetworkManager systemctl disable NetworkManager 重新启动一下就好了\nsystemctl restart network\n验证网络连通性 检查 IP 配置：ip addr 测试内网连通性：ping 192.168.200.2（网关地址） 测试外网连通性：ping www.baidu.com 如果仍有问题，可检查虚拟机网络模式（如 NAT 模式的网关是否与配置文件一致），或查看错误日志 journalctl -xe 进一步排查。\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='http://localhost:1313/'><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/avatar_hu_89ca753ea8ea85c7.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>✍️</span></figure><div class=site-meta><h1 class=site-name><a href=/>JustWin</a></h1><h2 class=site-description>分享技术与生活</h2></div></header><ol class=menu-social><li><a href=https://github.com/passion-win target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg></a></li><li><a href=https://t.me/+TFjBeZzowwU1YTY1 target=_blank title=telegram rel=me><svg viewBox="0 0 640 640"><path d="M320 72C183 72 72 183 72 320S183 568 320 568 568 457 568 320 457 72 320 72zM435 240.7C431.3 279.9 415.1 375.1 406.9 419c-3.5 18.6-10.3 24.8-16.9 25.4C375.6 445.7 364.7 434.9 350.7 425.7c-21.8-14.3-34.2-23.2-55.3-37.2C270.9 372.4 286.8 363.5 300.7 349 304.4 345.2 367.8 287.5 369 282.3 369.2 281.6 369.3 279.2 367.8 277.9 366.3 276.6 364.2 277.1 362.7 277.4 360.5 277.9 325.6 300.9 258.1 346.5 248.2 353.3 239.2 356.6 231.2 356.4 222.3 356.2 205.3 351.4 192.6 347.3 177.1 342.3 164.7 339.6 165.8 331 166.4 326.5 172.5 322 184.2 317.3 256.5 285.8 304.7 265 328.8 255c68.9-28.6 83.2-33.6 92.5-33.8C423.4 221.2 427.9 221.7 430.9 224.1 432.9 225.8 434.1 228.2 434.4 230.8 434.9 234 435 237.3 434.8 240.6z"/></svg></a></li><li><a href=https://twitter.com/@win1688888888 target=_blank title=twitter rel=me><svg width="800" height="800" viewBox="0 -2 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>twitter [#154]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-60.000000, -7521.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M10.29 7377C17.837 7377 21.965 7370.84365 21.965 7365.50546 21.965 7365.33021 21.965 7365.15595 21.953 7364.98267 22.756 7364.41163 23.449 7363.70276 24 7362.8915 23.252 7363.21837 22.457 7363.433 21.644 7363.52751 22.5 7363.02244 23.141 7362.2289 23.448 7361.2926 22.642 7361.76321 21.761 7362.095 20.842 7362.27321 19.288 7360.64674 16.689 7360.56798 15.036 7362.09796 13.971 7363.08447 13.518 7364.55538 13.849 7365.95835 10.55 7365.79492 7.476 7364.261 5.392 7361.73762 4.303 7363.58363 4.86 7365.94457 6.663 7367.12996 6.01 7367.11125 5.371 7366.93797 4.8 7366.62489V7366.67608C4.801 7368.5989 6.178 7370.2549 8.092 7370.63591 7.488 7370.79836 6.854 7370.82199 6.24 7370.70483 6.777 7372.35099 8.318 7373.47829 10.073 7373.51078 8.62 7374.63513 6.825 7375.24554 4.977 7375.24358 4.651 7375.24259 4.325 7375.22388 4 7375.18549 5.877 7376.37088 8.06 7377 10.29 7376.99705" id="twitter-[#154]"/></g></g></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><span>首页</span></a></li><li><a href=/links/><span>网站</span></a></li><li><a href=/linux/><span>Linux</span></a></li><li><a href=/docker/><span>docker</span></a></li><li><a href=/k8s/><span>k8s</span></a></li><li><a href=/mysql/><span>mysql</span></a></li><li><a href=/project/><span>项目</span></a></li><li><a href=/about/><span>关于</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=http://localhost:1313/ selected>中文</option><option value=http://localhost:1313/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#一修改网络配置>一、修改网络配置</a><ol><li><a href=#2-处理-networkmanager-冲突>2. 处理 NetworkManager 冲突</a></li><li><a href=#验证网络连通性>验证网络连通性</a></li><li><a href=#一-前置准备vmware-虚拟网络编辑器设置>一、 前置准备：VMware 虚拟网络编辑器设置</a></li><li><a href=#二-核心配置设置静态-ip永久生效>二、 核心配置：设置静态 IP（永久生效）</a><ol><li><a href=#1-编辑网卡配置文件>1. 编辑网卡配置文件</a></li><li><a href=#2-修改与新增内容关键>2. 修改与新增内容（关键）</a></li><li><a href=#3-重启网络服务>3. 重启网络服务</a></li></ol></li><li><a href=#三-常见问题处理networkmanager-冲突>三、 常见问题处理：NetworkManager 冲突</a></li><li><a href=#四-进阶配置主机名与-hosts-映射>四、 进阶配置：主机名与 Hosts 映射</a><ol><li><a href=#1-永久修改主机名-推荐-systemd-方式>1. 永久修改主机名 (推荐 Systemd 方式)</a></li><li><a href=#2-配置-hosts-映射-本地-dns>2. 配置 Hosts 映射 (本地 DNS)</a></li></ol></li><li><a href=#五-高级网络路由与子接口-修正与补充>五、 高级网络：路由与子接口 (修正与补充)</a><ol><li><a href=#1-永久配置路由-推荐方法>1. 永久配置路由 (推荐方法)</a></li><li><a href=#2-配置网卡子接口-单网卡多-ip>2. 配置网卡子接口 (单网卡多 IP)</a></li></ol></li><li><a href=#六-故障排查流程-troubleshooting>六、 故障排查流程 (Troubleshooting)</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category></header><div class=article-title-wrapper><h2 class=article-title><a href=/linux/%E4%BF%AE%E6%94%B9%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/>修改网络配置</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-12-04</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 4 分钟</time></div></footer></div></header><section class=article-content><h2 id=一修改网络配置>一、修改网络配置</h2><p>vi /etc/sysconfig/network-scripts/ifcfg-ens33</p><p><img src=https://telegraph-image-5tj.pages.dev/file/AgACAgUAAyEGAAS6dLpwAANGaTDkn4Qxl98vCylXr9TIk6elRXUAAskLaxtOAYhVZ4zq-tKPFo8BAAMCAAN4AAM2BA.png loading=lazy></p><h3 id=2-处理-networkmanager-冲突>2. 处理 NetworkManager 冲突</h3><p>CentOS 7 中 <code>NetworkManager</code> 服务可能与传统网络服务冲突，执行以下命令关闭它：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl stop NetworkManager
</span></span><span class=line><span class=cl>systemctl disable NetworkManager
</span></span></code></pre></td></tr></table></div></div><p>重新启动一下就好了</p><p>systemctl restart network</p><h3 id=验证网络连通性>验证网络连通性</h3><ul><li>检查 IP 配置：<code>ip addr</code></li><li>测试内网连通性：<code>ping 192.168.200.2</code>（网关地址）</li><li>测试外网连通性：<code>ping www.baidu.com</code></li></ul><p>如果仍有问题，可检查虚拟机网络模式（如 NAT 模式的网关是否与配置文件一致），或查看错误日志 <code>journalctl -xe</code> 进一步排查。</p><h3 id=一-前置准备vmware-虚拟网络编辑器设置>一、 前置准备：VMware 虚拟网络编辑器设置</h3><p><strong>在修改 CentOS 内部配置之前，必须先确认 VMware 的外部网络设置。</strong> 这是一切配置的基础。</p><ol><li>打开 VMware Workstation -> <strong>编辑 (Edit)</strong> -> <strong>虚拟网络编辑器 (Virtual Network Editor)</strong>。</li><li>选择 <strong>VMnet8 (NAT模式)</strong>（这是最常用的模式）。</li><li>点击 <strong>NAT 设置 (NAT Settings)</strong>，记录下 <strong>网关 IP (Gateway IP)</strong>（例如：<code>192.168.200.2</code>）。</li><li>返回主界面，记录下 <strong>子网 IP (Subnet IP)</strong>（例如：<code>192.168.200.0</code>）。</li></ol><blockquote><p><strong>注意</strong>：你在 CentOS 中设置的 IP 地址必须在“子网 IP”段内，且“网关”必须与 VMware 的 NAT 设置一致。</p></blockquote><hr><h3 id=二-核心配置设置静态-ip永久生效>二、 核心配置：设置静态 IP（永久生效）</h3><p>这是服务器最标准的配置方式，确保重启后 IP 不变。</p><h4 id=1-编辑网卡配置文件>1. 编辑网卡配置文件</h4><p>使用 <code>vi</code> 或 <code>vim</code> 编辑默认网卡（通常是 <code>ens33</code>）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/sysconfig/network-scripts/ifcfg-ens33
</span></span></code></pre></td></tr></table></div></div><h4 id=2-修改与新增内容关键>2. 修改与新增内容（关键）</h4><p>请参照以下模板修改，<strong>重点关注注释部分</strong>：</p><p>Properties</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>TYPE=&#34;Ethernet&#34;
</span></span><span class=line><span class=cl>PROXY_METHOD=&#34;none&#34;
</span></span><span class=line><span class=cl>BROWSER_ONLY=&#34;no&#34;
</span></span><span class=line><span class=cl># 关键修改 1: 将 dhcp 改为 static (静态IP)
</span></span><span class=line><span class=cl>BOOTPROTO=&#34;static&#34;  
</span></span><span class=line><span class=cl>DEFROUTE=&#34;yes&#34;
</span></span><span class=line><span class=cl>IPV4_FAILURE_FATAL=&#34;no&#34;
</span></span><span class=line><span class=cl>IPV6INIT=&#34;yes&#34;
</span></span><span class=line><span class=cl>IPV6_AUTOCONF=&#34;yes&#34;
</span></span><span class=line><span class=cl>IPV6_DEFROUTE=&#34;yes&#34;
</span></span><span class=line><span class=cl>IPV6_FAILURE_FATAL=&#34;no&#34;
</span></span><span class=line><span class=cl>IPV6_ADDR_GEN_MODE=&#34;stable-privacy&#34;
</span></span><span class=line><span class=cl>NAME=&#34;ens33&#34;
</span></span><span class=line><span class=cl>UUID=&#34;&lt;保持原有的UUID不变&gt;&#34;
</span></span><span class=line><span class=cl>DEVICE=&#34;ens33&#34;
</span></span><span class=line><span class=cl># 关键修改 2: 开机自启，必须为 yes
</span></span><span class=line><span class=cl>ONBOOT=&#34;yes&#34;        
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># --- 以下为新增/修改的网络参数 ---
</span></span><span class=line><span class=cl># 设置具体的 IP 地址 (需在 VMnet8 子网段内)
</span></span><span class=line><span class=cl>IPADDR=&#34;192.168.200.10&#34;  
</span></span><span class=line><span class=cl># 子网掩码 (通常是 255.255.255.0)
</span></span><span class=line><span class=cl>NETMASK=&#34;255.255.255.0&#34;  
</span></span><span class=line><span class=cl># 网关 (必须与 VMware NAT 设置一致)
</span></span><span class=line><span class=cl>GATEWAY=&#34;192.168.200.2&#34;  
</span></span><span class=line><span class=cl># DNS 解析服务器 (建议配置，否则无法 ping 通域名)
</span></span><span class=line><span class=cl>DNS1=&#34;114.114.114.114&#34;   
</span></span><span class=line><span class=cl>DNS2=&#34;8.8.8.8&#34;
</span></span></code></pre></td></tr></table></div></div><h4 id=3-重启网络服务>3. 重启网络服务</h4><p>修改完成后保存退出（<code>:wq</code>），并重启网络：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>systemctl restart network
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=三-常见问题处理networkmanager-冲突>三、 常见问题处理：NetworkManager 冲突</h3><p>在 CentOS 7 中，<code>NetworkManager</code> 有时会覆盖手动修改的配置文件，导致配置不生效或报错。</p><p><strong>推荐方案</strong>：如果是服务器环境，建议永久关闭 NetworkManager。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 1. 停止服务
</span></span><span class=line><span class=cl>systemctl stop NetworkManager
</span></span><span class=line><span class=cl># 2. 禁止开机自启
</span></span><span class=line><span class=cl>systemctl disable NetworkManager
</span></span><span class=line><span class=cl># 3. 重新启动 network 服务以确保接管网络
</span></span><span class=line><span class=cl>systemctl restart network
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=四-进阶配置主机名与-hosts-映射>四、 进阶配置：主机名与 Hosts 映射</h3><h4 id=1-永久修改主机名-推荐-systemd-方式>1. 永久修改主机名 (推荐 Systemd 方式)</h4><p>你提到的修改 <code>/etc/hostname</code> 是对的，但使用 <code>hostnamectl</code> 命令更规范，它会自动同步相关文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># 设置主机名为 node1
</span></span><span class=line><span class=cl>hostnamectl set-hostname node1
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># 验证
</span></span><span class=line><span class=cl>hostname
</span></span></code></pre></td></tr></table></div></div><h4 id=2-配置-hosts-映射-本地-dns>2. 配置 Hosts 映射 (本地 DNS)</h4><p>为了方便通过名字访问其他机器，编辑 <code>/etc/hosts</code>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/hosts
</span></span></code></pre></td></tr></table></div></div><p>添加如下内容：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>192.168.200.10  node1
</span></span><span class=line><span class=cl>192.168.200.11  node2
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=五-高级网络路由与子接口-修正与补充>五、 高级网络：路由与子接口 (修正与补充)</h3><p>你原文档中的路由配置部分有一些命令拼写错误，以下是修正后的版本：</p><h4 id=1-永久配置路由-推荐方法>1. 永久配置路由 (推荐方法)</h4><p>修改 <code>/etc/sysconfig/static-routes</code> 文件（如果不存在则新建），这种方式比写在 <code>rc.local</code> 更稳定。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vi /etc/sysconfig/static-routes
</span></span></code></pre></td></tr></table></div></div><p><strong>格式</strong>：<code>any net 目标网段 netmask 子网掩码 gw 下一跳网关</code></p><p><strong>示例</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>any net 10.0.0.0 netmask 255.0.0.0 gw 192.168.200.2
</span></span></code></pre></td></tr></table></div></div><h4 id=2-配置网卡子接口-单网卡多-ip>2. 配置网卡子接口 (单网卡多 IP)</h4><p>场景：一个网卡需要绑定两个不同的 IP 地址。</p><p><strong>步骤</strong>：</p><ol><li><p>复制物理网卡配置文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd /etc/sysconfig/network-scripts/
</span></span><span class=line><span class=cl>cp ifcfg-ens33 ifcfg-ens33:0
</span></span></code></pre></td></tr></table></div></div></li><li><p>编辑子接口文件 <code>vi ifcfg-ens33:0</code>：</p><p>Properties</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>DEVICE=&#34;ens33:0&#34;   # 修改设备名
</span></span><span class=line><span class=cl>ONBOOT=&#34;yes&#34;
</span></span><span class=line><span class=cl>BOOTPROTO=&#34;static&#34;
</span></span><span class=line><span class=cl>IPADDR=&#34;192.168.200.20&#34;  # 新的 IP
</span></span><span class=line><span class=cl>NETMASK=&#34;255.255.255.0&#34;
</span></span><span class=line><span class=cl># UUID 行建议删除，避免冲突
</span></span></code></pre></td></tr></table></div></div></li><li><p>重启网络：<code>systemctl restart network</code></p></li></ol><hr><h3 id=六-故障排查流程-troubleshooting>六、 故障排查流程 (Troubleshooting)</h3><p>如果配置后无法上网，请按以下顺序执行命令排查：</p><ol><li><p><strong>检查 IP 是否生效</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ip addr  # 此时应能看到你设置的静态IP
</span></span></code></pre></td></tr></table></div></div><p><em>如果看不到 IP，通常是 <code>ONBOOT=no</code> 没改成 <code>yes</code>。</em></p></li><li><p><strong>检查网关连通性</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ping 192.168.200.2
</span></span></code></pre></td></tr></table></div></div><p><em>如果不通，检查 VMware 的“虚拟网络编辑器”设置是否正确，或者 Windows 宿主机的防火墙。</em></p></li><li><p><strong>检查外网连通性 (IP)</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ping 8.8.8.8
</span></span></code></pre></td></tr></table></div></div><p><em>如果不通，说明网关配置错误或 NAT 服务异常。</em></p></li><li><p><strong>检查域名解析 (DNS)</strong>：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ping www.baidu.com
</span></span></code></pre></td></tr></table></div></div><p><em>如果能 ping 通 8.8.8.8 但 ping 不通百度，说明 <code>DNS1</code> 参数未配置或配置错误。</em></p></li></ol><hr><p>下一步建议：</p><p>如果您在执行 systemctl restart network 时遇到具体报错（例如 Job for network.service failed），可以查看详细日志：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>journalctl -xe
</span></span></code></pre></td></tr></table></div></div><p>或者查看 <code>/var/log/messages</code>。</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>本文采用 CC BY-NC-SA 4.0 许可协议</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/k8s/kubernetes%E5%85%A8%E6%A0%88%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/><div class=article-details><h2 class=article-title>Kubernetes全栈知识体系</h2></div></a></article><article><a href=/linux/vmware-ubuntu/><div class=article-details><h2 class=article-title>Ubuntu</h2></div></a></article><article><a href=/project/%E9%A1%B9%E7%9B%AE04centos%E9%83%A8%E7%BD%B2mha/><div class=article-details><h2 class=article-title>centos部署MHA</h2></div></a></article><article><a href=/docker/docker%E6%BA%90/><div class=article-details><h2 class=article-title>docker源</h2></div></a></article><article><a href=/posts/%E6%8A%80%E6%9C%AF%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/><div class=article-details><h2 class=article-title>技术文件类型</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2025 © 2025 win. 保留所有权利.</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>