<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='Linux四剑客 &ldquo;Linux四剑客"是指在Linux系统中用于文件搜索和文本处理的四个核心命令行工具：find、grep、sed、awk。它们是系统管理和运维工作中不可或缺的利器，熟练掌握可大幅提升工作效率。\n'><title>Linux四剑客</title><link rel=canonical href=http://localhost:1313/posts/linux%E5%9B%9B%E5%89%91%E5%AE%A2/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Linux四剑客"><meta property='og:description' content='Linux四剑客 &ldquo;Linux四剑客"是指在Linux系统中用于文件搜索和文本处理的四个核心命令行工具：find、grep、sed、awk。它们是系统管理和运维工作中不可或缺的利器，熟练掌握可大幅提升工作效率。\n'><meta property='og:url' content='http://localhost:1313/posts/linux%E5%9B%9B%E5%89%91%E5%AE%A2/'><meta property='og:site_name' content='JustWin'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2025-11-10T00:00:00+00:00'><meta property='article:modified_time' content='2025-11-10T00:00:00+00:00'><meta property='og:image' content='http://localhost:1313/'><meta name=twitter:title content="Linux四剑客"><meta name=twitter:description content='Linux四剑客 &ldquo;Linux四剑客"是指在Linux系统中用于文件搜索和文本处理的四个核心命令行工具：find、grep、sed、awk。它们是系统管理和运维工作中不可或缺的利器，熟练掌握可大幅提升工作效率。\n'><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='http://localhost:1313/'><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/avatar_hu_89ca753ea8ea85c7.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>✍️</span></figure><div class=site-meta><h1 class=site-name><a href=/>JustWin</a></h1><h2 class=site-description>分享技术与生活</h2></div></header><ol class=menu-social><li><a href=https://github.com/passion-win target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg></a></li><li><a href=https://t.me/+TFjBeZzowwU1YTY1 target=_blank title=telegram rel=me><svg viewBox="0 0 640 640"><path d="M320 72C183 72 72 183 72 320S183 568 320 568 568 457 568 320 457 72 320 72zM435 240.7C431.3 279.9 415.1 375.1 406.9 419c-3.5 18.6-10.3 24.8-16.9 25.4C375.6 445.7 364.7 434.9 350.7 425.7c-21.8-14.3-34.2-23.2-55.3-37.2C270.9 372.4 286.8 363.5 300.7 349 304.4 345.2 367.8 287.5 369 282.3 369.2 281.6 369.3 279.2 367.8 277.9 366.3 276.6 364.2 277.1 362.7 277.4 360.5 277.9 325.6 300.9 258.1 346.5 248.2 353.3 239.2 356.6 231.2 356.4 222.3 356.2 205.3 351.4 192.6 347.3 177.1 342.3 164.7 339.6 165.8 331 166.4 326.5 172.5 322 184.2 317.3 256.5 285.8 304.7 265 328.8 255c68.9-28.6 83.2-33.6 92.5-33.8C423.4 221.2 427.9 221.7 430.9 224.1 432.9 225.8 434.1 228.2 434.4 230.8 434.9 234 435 237.3 434.8 240.6z"/></svg></a></li><li><a href=https://twitter.com/@win1688888888 target=_blank title=twitter rel=me><svg width="800" height="800" viewBox="0 -2 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>twitter [#154]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-60.000000, -7521.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M10.29 7377C17.837 7377 21.965 7370.84365 21.965 7365.50546 21.965 7365.33021 21.965 7365.15595 21.953 7364.98267 22.756 7364.41163 23.449 7363.70276 24 7362.8915 23.252 7363.21837 22.457 7363.433 21.644 7363.52751 22.5 7363.02244 23.141 7362.2289 23.448 7361.2926 22.642 7361.76321 21.761 7362.095 20.842 7362.27321 19.288 7360.64674 16.689 7360.56798 15.036 7362.09796 13.971 7363.08447 13.518 7364.55538 13.849 7365.95835 10.55 7365.79492 7.476 7364.261 5.392 7361.73762 4.303 7363.58363 4.86 7365.94457 6.663 7367.12996 6.01 7367.11125 5.371 7366.93797 4.8 7366.62489V7366.67608C4.801 7368.5989 6.178 7370.2549 8.092 7370.63591 7.488 7370.79836 6.854 7370.82199 6.24 7370.70483 6.777 7372.35099 8.318 7373.47829 10.073 7373.51078 8.62 7374.63513 6.825 7375.24554 4.977 7375.24358 4.651 7375.24259 4.325 7375.22388 4 7375.18549 5.877 7376.37088 8.06 7377 10.29 7376.99705" id="twitter-[#154]"/></g></g></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><span>首页</span></a></li><li><a href=/archives/><span>归档</span></a></li><li><a href=/about/><span>关于</span></a></li><li><a href=/links/><span>网站分享</span></a></li><li><a href=/blockchain/><span>待定</span></a></li><li><a href=/docker/><span>docker</span></a></li><li><a href=/k8s/><span>k8s</span></a></li><li><a href><span></span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=http://localhost:1313/ selected>中文</option><option value=http://localhost:1313/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#一四剑客概述>一、四剑客概述</a></li><li><a href=#二find文件查找专家>二、find：文件查找专家</a><ol><li><a href=#21-基本语法>2.1 基本语法</a></li><li><a href=#22-核心操作步骤详解>2.2 核心操作步骤详解</a></li></ol></li><li><a href=#三grep文本搜索利器>三、grep：文本搜索利器</a><ol><li><a href=#31-基本语法>3.1 基本语法</a></li><li><a href=#32-核心操作步骤详解>3.2 核心操作步骤详解</a></li></ol></li><li><a href=#四sed流式文本编辑器>四、sed：流式文本编辑器</a><ol><li><a href=#41-基本语法>4.1 基本语法</a></li><li><a href=#42-核心操作步骤详解>4.2 核心操作步骤详解</a></li></ol></li><li><a href=#五awk文本分析处理引擎>五、awk：文本分析处理引擎</a><ol><li><a href=#51-基本语法>5.1 基本语法</a></li><li><a href=#52-核心操作步骤详解>5.2 核心操作步骤详解</a></li></ol></li><li><a href=#六特殊符号与引号详解>六、特殊符号与引号详解</a><ol><li><a href=#61-单引号双引号反引号不加引号的区别>6.1 单引号、双引号、反引号、不加引号的区别</a></li><li><a href=#62-重定向符号详解>6.2 重定向符号详解</a></li></ol></li><li><a href=#七四剑客组合应用实例>七、四剑客组合应用实例</a><ol><li><a href=#实例1清理过期日志并统计>实例1：清理过期日志并统计</a></li><li><a href=#实例2配置批量修改与验证>实例2：配置批量修改与验证</a></li><li><a href=#实例3日志分析报表ip访问top10>实例3：日志分析报表（IP访问Top10）</a></li></ol></li><li><a href=#八注意事项与最佳实践>八、注意事项与最佳实践</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/linux%E5%9B%9B%E5%89%91%E5%AE%A2/>Linux四剑客</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-11-10</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 10 分钟</time></div></footer></div></header><section class=article-content><h1 id=linux四剑客>Linux四剑客</h1><p>&ldquo;Linux四剑客"是指在Linux系统中用于文件搜索和文本处理的四个核心命令行工具：<strong>find、grep、sed、awk</strong>。它们是系统管理和运维工作中不可或缺的利器，熟练掌握可大幅提升工作效率。</p><hr><h2 id=一四剑客概述>一、四剑客概述</h2><div class=table-wrapper><table><thead><tr><th>命令</th><th>核心功能</th><th>处理对象</th><th>特点</th></tr></thead><tbody><tr><td><strong>find</strong></td><td>文件/目录查找</td><td>文件系统</td><td>递归搜索，支持多种条件组合</td></tr><tr><td><strong>grep</strong></td><td>文本内容搜索</td><td>文件内容</td><td>基于正则表达式匹配行</td></tr><tr><td><strong>sed</strong></td><td>流式文本编辑</td><td>文本流</td><td>非交互式，擅长替换/删除/插入</td></tr><tr><td><strong>awk</strong></td><td>文本分析处理</td><td>结构化文本</td><td>支持字段处理、计算和格式化输出</td></tr></tbody></table></div><hr><h2 id=二find文件查找专家>二、find：文件查找专家</h2><h3 id=21-基本语法>2.1 基本语法</h3><p>​
find [路径] [选项] [表达式]</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>路径：搜索起始目录（默认为当前目录）
</span></span><span class=line><span class=cl>选项：控制搜索行为
</span></span><span class=line><span class=cl>表达式：定义匹配条件
</span></span></code></pre></td></tr></table></div></div><h3 id=22-核心操作步骤详解>2.2 核心操作步骤详解</h3><p><strong>步骤1：按文件名查找</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /etc/ -type f -name <span class=s1>&#39;*.conf&#39;</span>
</span></span><span class=line><span class=cl>find /etc/ -type f -name <span class=s1>&#39;host*&#39;</span>      <span class=c1># 以hosts开头</span>
</span></span><span class=line><span class=cl>find /bin/ /sbin/ -type f -name <span class=s2>&#34;*ip&#34;</span> <span class=c1># 文件名包含ip</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：在指定目录下递归查找匹配名称的文件</li><li><code>-name</code>：按精确名称匹配（区分大小写），支持<code>*</code>（匹配一串字符）和<code>?</code>（匹配单个字符）</li><li><code>-iname</code>：忽略大小写匹配</li><li><code>-type f</code>：指定文件类型为普通文件（file）</li></ul><p><strong>步骤2：按文件类型查找</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /etc -type d      <span class=c1># 查找目录</span>
</span></span><span class=line><span class=cl>find /etc -type l      <span class=c1># 查找软链接</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-type</code>：指定文件类型，<code>d</code>（目录）、<code>f</code>（文件）、<code>l</code>（软链接）</li></ul><p><strong>步骤3：按文件大小查找</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /etc/ -type f -name <span class=s2>&#34;*.conf&#34;</span> -size +10k  <span class=c1># 大于10k</span>
</span></span><span class=line><span class=cl>find / -size +100M     <span class=c1># 大于100MB的文件</span>
</span></span><span class=line><span class=cl>find / -size -10k      <span class=c1># 小于10KB的文件</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-size</code>：指定大小，<code>+1M</code>表示大于1M，<code>-1k</code>表示小于1k</li></ul><p><strong>步骤4：按时间属性查找</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /var/log/ -type f -name <span class=s2>&#34;*.log&#34;</span> -mtime +3  <span class=c1># 修改时间大于3天</span>
</span></span><span class=line><span class=cl>find /var -mtime +7    <span class=c1># 7天前修改的文件</span>
</span></span><span class=line><span class=cl>find /var -mtime -1    <span class=c1># 24小时内修改的文件</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-mtime</code>：根据修改时间查找（单位：天），<code>+3</code>表示超过3天，<code>-1</code>表示1天内</li></ul><p><strong>步骤5：根据深度和权限查找</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /etc/ -maxdepth <span class=m>1</span> -type f -name <span class=s2>&#34;*.conf&#34;</span>  <span class=c1># 最大深度1层</span>
</span></span><span class=line><span class=cl>find / -perm <span class=m>755</span>        <span class=c1># 权限为755的文件</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-maxdepth</code>：限制查找最大深度</li><li><code>-perm</code>：按权限查找</li></ul><p><strong>步骤6：找出文件后进行删除（三种方法对比）</strong></p><p>创建测试环境：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p /app/logs/
</span></span><span class=line><span class=cl>touch /app/logs/access<span class=o>{</span>01..10<span class=o>}</span>.log
</span></span></code></pre></td></tr></table></div></div><p><strong>方法01：find与反引号</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rm -f <span class=sb>`</span>find /app/logs/ -type f -name <span class=s1>&#39;*.log&#39;</span><span class=sb>`</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：先执行反引号中的find命令，将结果作为参数传递给rm删除</li><li><strong>风险</strong>：文件名含空格会导致错误</li></ul><p><strong>方法02：find配合管道与xargs</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /app/logs/ -type f -name <span class=s2>&#34;*.log&#34;</span> <span class=p>|</span> xargs rm -f
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：find查找结果通过管道传递给xargs，xargs将结果作为参数逐个执行rm命令</li><li><strong>区别</strong>：<code>|</code>传递的是字符串，<code>|xargs</code>传递的是命令参数</li></ul><p><strong>方法03：find选项-exec</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /app/logs/ -type f -name <span class=s2>&#34;*.log&#34;</span> -exec rm -f <span class=o>{}</span> <span class=se>\;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：对find找到的每个文件执行rm命令</li><li><code>{}</code>：占位符，代表当前找到的文件</li><li><code>\;</code>：命令结束标记（必须转义）</li></ul><p><strong>步骤7：find与-exec的高级用法</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /etc/ -type f -name <span class=s2>&#34;*.conf&#34;</span> -exec tar zcf /backup/etc-exec.tar.gz <span class=o>{}</span> +
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>坑</strong>：使用<code>\;</code>会导致多次执行tar，最终只有1个文件</li><li><strong>解决</strong>：使用<code>+</code>号，先执行完find所有结果，一次性传递给exec</li><li>操作意思：<code>+</code> 让find将所有结果收集完成后，一次性传递给后面命令</li></ul><p><strong>步骤8：找出文件后打包压缩</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 方法01：find+反引号</span>
</span></span><span class=line><span class=cl>tar zcf /backup/etc-conf.tar.gz <span class=sb>`</span>find /etc/ -type f -name <span class=s2>&#34;*.conf&#34;</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方法02：find |xargs</span>
</span></span><span class=line><span class=cl>find /etc/ -type f -name <span class=s2>&#34;*.conf&#34;</span> <span class=p>|</span> xargs tar zcf /backup/etc_conf.tar.gz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方法03：find -exec（推荐+号）</span>
</span></span><span class=line><span class=cl>find /etc/ -type f -name <span class=s2>&#34;*.conf&#34;</span> -exec tar zcf /backup/etc-exec.tar.gz <span class=o>{}</span> +
</span></span></code></pre></td></tr></table></div></div><p><strong>步骤9：查找特定文件的路径（实用技巧）</strong></p><p>在实际运维中，经常需要查找某个文件（如<code>daily_check.sh</code>）的完整路径。除了基本的文件名查找，还有多种高效方法：</p><p><strong>方法01：使用find递归搜索（最全面）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 从根目录开始搜索（需sudo权限）</span>
</span></span><span class=line><span class=cl>sudo find / -name <span class=s2>&#34;daily_check.sh&#34;</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 只在当前用户主目录搜索</span>
</span></span><span class=line><span class=cl>find ~ -name <span class=s2>&#34;daily_check.sh&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在当前目录及子目录搜索</span>
</span></span><span class=line><span class=cl>find . -name <span class=s2>&#34;daily_check.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：在指定目录下递归查找匹配文件名的所有路径</li><li><code>2>/dev/null</code>：将错误信息（如权限不足）重定向到黑洞，避免屏幕刷屏</li><li><code>-name</code>：精确匹配文件名（区分大小写），支持<code>*</code>（匹配一串字符）和<code>?</code>（匹配单个字符）</li><li><code>-iname</code>：忽略大小写匹配（如<code>find / -iname "daily_check.sh"</code>）</li></ul><p><strong>方法02：使用locate快速定位（最快）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 先更新数据库（可能需要sudo）</span>
</span></span><span class=line><span class=cl>sudo updatedb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 然后搜索（基于数据库，瞬时返回）</span>
</span></span><span class=line><span class=cl>locate daily_check.sh
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：<code>locate</code>基于预建的数据库搜索，速度极快但可能不是最新结果</li><li>优点：比find快数百倍，适合频繁查询</li><li>注意：新创建的文件需执行<code>updatedb</code>后才能被定位到</li></ul><p><strong>方法03：查找可执行文件路径</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>which daily_check.sh      <span class=c1># 查找在$PATH中的可执行文件</span>
</span></span><span class=line><span class=cl><span class=nb>type</span> daily_check.sh       <span class=c1># 显示命令类型和路径</span>
</span></span><span class=line><span class=cl>whereis daily_check.sh    <span class=c1># 查找二进制、源文件和手册页</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：如果脚本在系统PATH环境变量中，快速定位其路径</li><li><code>which</code>：只查找可执行文件，返回第一个匹配路径</li><li><code>whereis</code>：查找范围更广，包括二进制、源码和man手册</li></ul><p><strong>方法04：组合查找（推荐实用）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 先用locate快速查找，找不到再用find深度搜索</span>
</span></span><span class=line><span class=cl>locate daily_check.sh <span class=o>||</span> find / -name <span class=s2>&#34;daily_check.sh&#34;</span> 2&gt;/dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 结合grep过滤大量结果</span>
</span></span><span class=line><span class=cl>find /opt/scripts -type f -name <span class=s2>&#34;*.sh&#34;</span> <span class=p>|</span> grep daily_check
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：兼顾速度与完整性，locate失败时自动降级到find</li><li><code>||</code>：逻辑或，前一个命令失败时执行后一个</li></ul><p><strong>实际应用场景：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 场景1：找到脚本后查看内容</span>
</span></span><span class=line><span class=cl>find / -name <span class=s2>&#34;daily_check.sh&#34;</span> 2&gt;/dev/null <span class=p>|</span> xargs cat
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 场景2：找到脚本后批量修改权限</span>
</span></span><span class=line><span class=cl>find /opt -name <span class=s2>&#34;daily_check.sh&#34;</span> -exec chmod +x <span class=o>{}</span> <span class=se>\;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 场景3：统计找到了几个同名文件</span>
</span></span><span class=line><span class=cl>find / -name <span class=s2>&#34;daily_check.sh&#34;</span> 2&gt;/dev/null <span class=p>|</span> wc -l
</span></span></code></pre></td></tr></table></div></div><p><strong>最佳实践建议：</strong></p><ol><li><strong>优先使用locate</strong>：对于频繁查询的固定文件，先用locate，找不到再find</li><li><strong>限制搜索范围</strong>：已知大致目录时，指定路径减少搜索时间（如<code>find /opt -name "*.sh"</code>）</li><li><strong>处理权限问题</strong>：搜索系统目录时加<code>sudo</code>，错误重定向到<code>/dev/null</code></li><li><strong>模糊搜索</strong>：不确定完整文件名时，使用通配符（如<code>find / -name "*daily*.sh"</code>）</li></ol><hr><h2 id=三grep文本搜索利器>三、grep：文本搜索利器</h2><h3 id=31-基本语法>3.1 基本语法</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep <span class=o>[</span>选项<span class=o>]</span> <span class=s2>&#34;模式&#34;</span> <span class=o>[</span>文件...<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>模式</strong>：支持基本正则表达式、扩展正则表达式或固定字符串</li><li><strong>文件</strong>：可指定多个文件，省略时从标准输入读取</li></ul><h3 id=32-核心操作步骤详解>3.2 核心操作步骤详解</h3><p><strong>步骤1：基础文本搜索</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep -n --color <span class=s2>&#34;root&#34;</span> /etc/passwd
</span></span></code></pre></td></tr></table></div></div><ul><li>操作意思：在文件中查找"root&rdquo;，显示行号并高亮</li><li><code>-n</code>：显示行号</li><li><code>--color</code>：高亮匹配的关键字</li><li><code>/etc/passwd</code>：目标文件</li></ul><p><strong>步骤2：行首行尾锚定</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep -n --color <span class=s2>&#34;^root&#34;</span> /etc/passwd   <span class=c1># 以root开头</span>
</span></span><span class=line><span class=cl>grep -n --color <span class=s2>&#34;bash</span>$<span class=s2>&#34;</span> /etc/passwd   <span class=c1># 以bash结尾</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>^</code>：字符串开头</li><li><code>$</code>：字符串结尾</li></ul><p><strong>步骤3：反向匹配与去空行</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep -v <span class=s2>&#34;#&#34;</span> /etc/passwd               <span class=c1># 不包含#的行</span>
</span></span><span class=line><span class=cl>grep -v <span class=s2>&#34;#&#34;</span> /etc/passwd <span class=p>|</span> grep -v <span class=s2>&#34;^</span>$<span class=s2>&#34;</span> <span class=c1># 不包含#且去除空行</span>
</span></span><span class=line><span class=cl>grep -v <span class=s2>&#34;^</span>$<span class=s2>&#34;</span> file                     <span class=c1># 去除空行（^$表示空行）</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-v</code>：反向选择，不包含匹配文本的行</li><li><code>"^$"</code>：匹配空行（开头即结尾）</li></ul><p><strong>步骤4：忽略大小写搜索</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep -i <span class=s2>&#34;May&#34;</span> test.txt                <span class=c1># 不区分大小写</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-i</code>：ignore，忽略大小写</li></ul><p><strong>步骤5：使用扩展正则（egrep）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>egrep <span class=s1>&#39;([0-9]{1,3}\.){3}[0-9]{1,3}$&#39;</span> test.txt  <span class=c1># 匹配IP地址</span>
</span></span><span class=line><span class=cl>grep -E <span class=s1>&#39;([0-9]{1,3}\.){3}[0-9]{1,3}$&#39;</span> test.txt <span class=c1># 同上</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>egrep</code>：等同于<code>grep -E</code>，支持扩展正则表达式</li><li><code>{1,3}</code>：匹配1到3次</li><li><code>\.</code>：转义的点号</li></ul><p><strong>步骤6：正则表达式高级用法</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 匹配IP地址</span>
</span></span><span class=line><span class=cl>grep --color <span class=s2>&#34;[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}</span>$<span class=s2>&#34;</span> test.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 简化版</span>
</span></span><span class=line><span class=cl>egrep --color <span class=s2>&#34;([0-9]{1,3}\.){3}[0-9]{1,3}</span>$<span class=s2>&#34;</span> test.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 其他示例</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;[a-z]\{5\}&#39;</span> aa                 <span class=c1># 包含5个连续小写字母的行</span>
</span></span><span class=line><span class=cl>grep -c <span class=s2>&#34;48&#34;</span> test.txt                <span class=c1># 统计以&#34;48&#34;开头的行数</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>步骤7：多文件与管道过滤</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep <span class=s1>&#39;test&#39;</span> aa bb cc                 <span class=c1># 在多个文件中查找</span>
</span></span><span class=line><span class=cl>ls -l <span class=p>|</span> grep <span class=s1>&#39;^a&#39;</span>                    <span class=c1># 管道过滤，只显示以a开头的行</span>
</span></span><span class=line><span class=cl>grep -l <span class=s2>&#34;root&#34;</span> /etc/*                <span class=c1># 只显示包含root的文件名</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>步骤8：显示上下文</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep -A <span class=m>3</span> -B <span class=m>2</span> <span class=s2>&#34;exception&#34;</span> app.log  <span class=c1># 显示匹配行的前后文</span>
</span></span><span class=line><span class=cl>grep -C <span class=m>5</span> <span class=s2>&#34;error&#34;</span> app.log            <span class=c1># 上下各显示5行</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=四sed流式文本编辑器>四、sed：流式文本编辑器</h2><h3 id=41-基本语法>4.1 基本语法</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed <span class=o>[</span>选项<span class=o>]</span> <span class=s1>&#39;脚本命令&#39;</span> <span class=o>[</span>文件<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>脚本命令</strong>：由地址和动作组成，如<code>'3d'</code>、<code>'s/old/new/g'</code></li><li><strong>默认行为</strong>：处理结果输出到标准输出，<strong>不修改原文件</strong></li></ul><h3 id=42-核心操作步骤详解>4.2 核心操作步骤详解</h3><p><strong>步骤1：文本替换（最常用）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed <span class=s1>&#39;s/old/new/&#39;</span> file.txt            <span class=c1># 替换每行第一个&#34;old&#34;</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;s/old/new/g&#39;</span> file.txt           <span class=c1># 替换每行所有&#34;old&#34;（全局）</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;s/foo/bar/g&#39;</span> config.ini         <span class=c1># 全局替换</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>s</code>：substitute（替换）命令</li><li><code>/old/new/</code>：替换规则</li><li><code>g</code>：global，全局替换</li></ul><p><strong>步骤2：直接修改文件（⚠️危险操作）</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -i <span class=s1>&#39;s/foo/bar/g&#39;</span> config.ini      <span class=c1># 直接修改文件（无备份）</span>
</span></span><span class=line><span class=cl>sed -i.bak <span class=s1>&#39;s/foo/bar/g&#39;</span> config.ini  <span class=c1># 先备份为config.ini.bak再修改</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-i</code>：in-place，直接修改原文件</li><li>建议：总是先测试再加<code>-i</code>，或使用备份</li></ul><p><strong>步骤3：删除指定行</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed <span class=s1>&#39;3d&#39;</span> file.txt                    <span class=c1># 删除第3行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;/^#/d&#39;</span> file.txt                 <span class=c1># 删除所有以#开头的行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;/^$/d&#39;</span> file.txt                 <span class=c1># 删除空行</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>d</code>：delete（删除）命令</li><li><code>/^#/</code>：正则匹配以#开头的行</li></ul><p><strong>步骤4：插入/追加内容</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed <span class=s1>&#39;3i\inserted line&#39;</span> file.txt      <span class=c1># 在第3行前插入</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;3a\appended line&#39;</span> file.txt      <span class=c1># 在第3行后追加</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>i\</code>：insert（在指定行前插入）</li><li><code>a\</code>：append（在指定行后追加）</li></ul><p><strong>步骤5：多命令组合</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -e <span class=s1>&#39;s/old/new/&#39;</span> -e <span class=s1>&#39;s/baz/qux/&#39;</span> file.txt
</span></span><span class=line><span class=cl>sed -e <span class=s1>&#39;3d&#39;</span> -e <span class=s1>&#39;s/old/new/g&#39;</span> file.txt
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-e</code>：执行多个编辑命令（顺序执行）</li></ul><hr><h2 id=五awk文本分析处理引擎>五、awk：文本分析处理引擎</h2><h3 id=51-基本语法>5.1 基本语法</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;模式{动作}&#39;</span> <span class=o>[</span>文件<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><strong>模式</strong>：条件表达式或正则匹配</li><li><strong>动作</strong>：对匹配行执行的操作，多个动作用分号分隔</li><li><strong>默认行为</strong>：逐行处理，字段以空格或Tab分隔</li></ul><h3 id=52-核心操作步骤详解>5.2 核心操作步骤详解</h3><p><strong>步骤1：提取指定列</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{print $1}&#39;</span> access.log          <span class=c1># 提取第1列</span>
</span></span><span class=line><span class=cl>awk <span class=s1>&#39;{print $1, $3, $NF}&#39;</span> file       <span class=c1># 提取第1、3列和最后一列</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>$1, $2...</code>：表示第1、2&mldr;个字段</li><li><code>$0</code>：整行内容</li><li><code>$NF</code>：最后一个字段（Number of Fields）</li></ul><p><strong>步骤2：指定分隔符</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk -F: <span class=s1>&#39;{print $1}&#39;</span> /etc/passwd     <span class=c1># 以冒号为分隔符，提取用户名</span>
</span></span><span class=line><span class=cl>awk -F<span class=s1>&#39;,&#39;</span> <span class=s1>&#39;{print $2}&#39;</span> data.csv      <span class=c1># 处理CSV文件</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>-F</code>：指定字段分隔符（支持正则，如<code>-F'[:;]'</code>）</li></ul><p><strong>步骤3：条件过滤</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;$3 &gt; 100&#39;</span> data.txt              <span class=c1># 输出第3列大于100的行</span>
</span></span><span class=line><span class=cl>awk <span class=s1>&#39;/error/ {print $2}&#39;</span> app.log     <span class=c1># 匹配含&#34;error&#34;的行，输出第2列</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>模式可以是：正则表达式、比较表达式、组合条件</li></ul><p><strong>步骤4：计算统计</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{sum+=$1} END {print sum}&#39;</span> numbers.txt  <span class=c1># 求和</span>
</span></span><span class=line><span class=cl>awk <span class=s1>&#39;{count++} END {print count}&#39;</span> file       <span class=c1># 统计行数</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>END</code>：在所有行处理完成后执行</li></ul><p><strong>步骤5：格式化输出</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{printf &#34;%-10s %5d\n&#34;, $1, $2}&#39;</span> file
</span></span></code></pre></td></tr></table></div></div><ul><li><code>printf</code>：格式化输出（类似C语言）</li><li><code>%-10s</code>：左对齐，占10个字符的字符串</li><li><code>%5d</code>：右对齐，占5个字符的整数</li></ul><p><strong>步骤6：数组与复杂统计</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 统计每个IP的访问次数</span>
</span></span><span class=line><span class=cl>awk <span class=s1>&#39;{ips[$1]++} END {for(ip in ips) print ip, ips[ip]}&#39;</span> access.log
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=六特殊符号与引号详解>六、特殊符号与引号详解</h2><h3 id=61-单引号双引号反引号不加引号的区别>6.1 单引号、双引号、反引号、不加引号的区别</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># echo &#39;oldboy $LANG hostname{01..10}&#39;</span>
</span></span><span class=line><span class=cl><span class=c1># 输出：oldboy $LANG hostname{01..10}</span>
</span></span><span class=line><span class=cl><span class=c1># 单引号：所见即所得，内容原封不动输出，bash不会解析</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># echo &#34;oldboy $LANG hostname {01..10}&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 输出：oldboy en_US.UTF-8 hostname {01..10}</span>
</span></span><span class=line><span class=cl><span class=c1># 双引号：解析$和``，不解析{}（通配符）</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># echo oldboy $LANG hostname{01..10}</span>
</span></span><span class=line><span class=cl><span class=c1># 输出：oldboy en_US.UTF-8 hostname01 hostname02 ...</span>
</span></span><span class=line><span class=cl><span class=c1># 不加引号：与双引号类似，会解析{}（文件名通配符）</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># echo `hostname`</span>
</span></span><span class=line><span class=cl><span class=c1># 输出：实际主机名</span>
</span></span><span class=line><span class=cl><span class=c1># 反引号：优先执行，先运行引号里面的命令（现代用法推荐$(command)）</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=62-重定向符号详解>6.2 重定向符号详解</h3><div class=table-wrapper><table><thead><tr><th>符号</th><th>名称</th><th>作用</th></tr></thead><tbody><tr><td><code>></code> 或 <code>1></code></td><td>标准输出重定向</td><td>先清空文件，然后写入正确信息</td></tr><tr><td><code>>></code> 或 <code>1>></code></td><td>标准输出追加重定向</td><td>追加到文件末尾</td></tr><tr><td><code>2></code></td><td>标准错误输出重定向</td><td>先清空，然后写入错误信息</td></tr><tr><td><code>2>></code></td><td>标准错误追加重定向</td><td>追加错误信息到文件末尾</td></tr><tr><td><code>2>&amp;1</code> 或 <code>&>></code></td><td>标准错误与输出合并</td><td>正确和错误信息都写入指定文件</td></tr><tr><td><code>&lt;</code> 或 <code>0&lt;</code></td><td>输入重定向</td><td>从文件读取输入</td></tr><tr><td><code>&lt;&lt;</code> 或 <code>0&lt;&lt;</code></td><td>追加输入重定向</td><td>从文件追加读取</td></tr></tbody></table></div><p><strong>示例：</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>command</span> &gt; file 2&gt;<span class=p>&amp;</span><span class=m>1</span>    <span class=c1># 正确和错误都重定向到file</span>
</span></span><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>&gt;&gt; file       <span class=c1># 同上，简写形式</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=七四剑客组合应用实例>七、四剑客组合应用实例</h2><h3 id=实例1清理过期日志并统计>实例1：清理过期日志并统计</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find /var/log -name <span class=s2>&#34;*.log&#34;</span> -mtime +30 -exec gzip <span class=o>{}</span> <span class=se>\;</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>find /var/log -name <span class=s2>&#34;*.gz&#34;</span> -mtime +365 -delete <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>grep -c <span class=s2>&#34;error&#34;</span> /var/log/app.log <span class=p>|</span> awk <span class=s1>&#39;{sum+=$1} END {print &#34;Total errors:&#34;, sum}&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>操作意思分解</strong>：</p><ol><li>查找30天前的日志文件并压缩</li><li>删除365天前的压缩包</li><li>统计error出现总次数</li></ol><h3 id=实例2配置批量修改与验证>实例2：配置批量修改与验证</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -i.bak <span class=s1>&#39;s/timeout=30/timeout=60/g&#39;</span> /etc/app.conf <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>grep <span class=s2>&#34;timeout&#34;</span> /etc/app.conf <span class=p>|</span> awk -F<span class=o>=</span> <span class=s1>&#39;{print $2}&#39;</span> <span class=p>|</span> sed <span class=s1>&#39;s/ //g&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>操作意思分解</strong>：</p><ol><li>备份并修改超时配置</li><li>提取新配置值并清理空格</li></ol><h3 id=实例3日志分析报表ip访问top10>实例3：日志分析报表（IP访问Top10）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep <span class=s2>&#34;2024-01&#34;</span> access.log <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>awk <span class=s1>&#39;{ips[$1]++} END {for(ip in ips) print ip, ips[ip]}&#39;</span> <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>sort -k2 -nr <span class=p>|</span> head -10
</span></span></code></pre></td></tr></table></div></div><p><strong>操作意思分解</strong>：</p><ol><li>筛选1月份日志</li><li>统计每个IP的访问次数</li><li>按访问次数排序，取前10名</li></ol><hr><h2 id=八注意事项与最佳实践>八、注意事项与最佳实践</h2><ol><li><strong>find处理大量文件</strong>：建议配合<code>-maxdepth</code>限制深度，使用<code>+</code>代替<code>\;</code>提升性能</li><li><strong>grep正则</strong>：使用<code>-E</code>支持扩展正则，等价于<code>egrep</code></li><li><strong>sed危险操作</strong>：务必先测试再使用<code>-i</code>修改，防止误操作</li><li><strong>awk分隔符</strong>：处理CSV文件时建议用<code>-F','</code>指定逗号分隔符</li><li><strong>引号使用</strong>：优先使用单引号保护模式，需要变量解析时用双引号</li><li><strong>备份习惯</strong>：任何修改操作前，先备份原始文件</li></ol><p>掌握这四个工具的组合使用，可解决90%以上的Linux文本处理场景。建议通过<code>man find</code>、<code>man grep</code>、<code>man sed</code>、<code>man awk</code>查看完整手册深入学习。</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>本文采用 CC BY-NC-SA 4.0 许可协议</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/kali/><div class=article-details><h2 class=article-title>Kali</h2></div></a></article><article><a href=/k8s/kubernetes-k8s-/><div class=article-details><h2 class=article-title>Kubernetes</h2></div></a></article><article><a href=/k8s/kubernetes%E7%94%9F%E4%BA%A7%E7%BA%A7%E5%AE%8C%E6%95%B4%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/><div class=article-details><h2 class=article-title>Kubernetes 生产级完整实战指南</h2></div></a></article><article><a href=/k8s/pod%E6%8E%92%E6%9F%A5%E6%89%8B%E5%86%8C/><div class=article-details><h2 class=article-title>Kubernetes Pod</h2></div></a></article><article><a href=/posts/linux%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/><div class=article-details><h2 class=article-title>linux日志分析</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2025 © 2025 win. 保留所有权利.</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>