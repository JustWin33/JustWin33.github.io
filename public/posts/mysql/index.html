<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="不同安装方式"><title>MySQL</title><link rel=canonical href=http://localhost:1313/posts/mysql/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="MySQL"><meta property='og:description' content="不同安装方式"><meta property='og:url' content='http://localhost:1313/posts/mysql/'><meta property='og:site_name' content='JustWin'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2025-11-07T00:00:00+00:00'><meta property='article:modified_time' content='2025-11-07T00:00:00+00:00'><meta property='og:image' content='http://localhost:1313/'><meta name=twitter:title content="MySQL"><meta name=twitter:description content="不同安装方式"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='http://localhost:1313/'><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/avatar_hu_89ca753ea8ea85c7.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>✍️</span></figure><div class=site-meta><h1 class=site-name><a href=/>JustWin</a></h1><h2 class=site-description>分享技术与生活</h2></div></header><ol class=menu-social><li><a href=https://github.com/passion-win target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg></a></li><li><a href=https://t.me/+TFjBeZzowwU1YTY1 target=_blank title=telegram rel=me><svg viewBox="0 0 640 640"><path d="M320 72C183 72 72 183 72 320S183 568 320 568 568 457 568 320 457 72 320 72zM435 240.7C431.3 279.9 415.1 375.1 406.9 419c-3.5 18.6-10.3 24.8-16.9 25.4C375.6 445.7 364.7 434.9 350.7 425.7c-21.8-14.3-34.2-23.2-55.3-37.2C270.9 372.4 286.8 363.5 300.7 349 304.4 345.2 367.8 287.5 369 282.3 369.2 281.6 369.3 279.2 367.8 277.9 366.3 276.6 364.2 277.1 362.7 277.4 360.5 277.9 325.6 300.9 258.1 346.5 248.2 353.3 239.2 356.6 231.2 356.4 222.3 356.2 205.3 351.4 192.6 347.3 177.1 342.3 164.7 339.6 165.8 331 166.4 326.5 172.5 322 184.2 317.3 256.5 285.8 304.7 265 328.8 255c68.9-28.6 83.2-33.6 92.5-33.8C423.4 221.2 427.9 221.7 430.9 224.1 432.9 225.8 434.1 228.2 434.4 230.8 434.9 234 435 237.3 434.8 240.6z"/></svg></a></li><li><a href=https://twitter.com/@win1688888888 target=_blank title=twitter rel=me><svg width="800" height="800" viewBox="0 -2 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>twitter [#154]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-60.000000, -7521.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M10.29 7377C17.837 7377 21.965 7370.84365 21.965 7365.50546 21.965 7365.33021 21.965 7365.15595 21.953 7364.98267 22.756 7364.41163 23.449 7363.70276 24 7362.8915 23.252 7363.21837 22.457 7363.433 21.644 7363.52751 22.5 7363.02244 23.141 7362.2289 23.448 7361.2926 22.642 7361.76321 21.761 7362.095 20.842 7362.27321 19.288 7360.64674 16.689 7360.56798 15.036 7362.09796 13.971 7363.08447 13.518 7364.55538 13.849 7365.95835 10.55 7365.79492 7.476 7364.261 5.392 7361.73762 4.303 7363.58363 4.86 7365.94457 6.663 7367.12996 6.01 7367.11125 5.371 7366.93797 4.8 7366.62489V7366.67608C4.801 7368.5989 6.178 7370.2549 8.092 7370.63591 7.488 7370.79836 6.854 7370.82199 6.24 7370.70483 6.777 7372.35099 8.318 7373.47829 10.073 7373.51078 8.62 7374.63513 6.825 7375.24554 4.977 7375.24358 4.651 7375.24259 4.325 7375.22388 4 7375.18549 5.877 7376.37088 8.06 7377 10.29 7376.99705" id="twitter-[#154]"/></g></g></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><span>首页</span></a></li><li><a href=/archives/><span>归档</span></a></li><li><a href=/about/><span>关于</span></a></li><li><a href=/links/><span>网站分享</span></a></li><li><a href=/blockchain/><span>待定</span></a></li><li><a href><span></span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=http://localhost:1313/ selected>中文</option><option value=http://localhost:1313/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#官方yum源安装>官方yum源安装</a><ol><li><a href=#1-安装-mysql>1. 安装 MySQL</a></li><li><a href=#使用最新的-mysql-gpg-密钥并强制安装>使用最新的 MySQL GPG 密钥并强制安装</a><ol><li><a href=#步骤-1下载并导入最新的-mysql-gpg-密钥>步骤 1：下载并导入最新的 MySQL GPG 密钥</a></li><li><a href=#步骤-2手动指定密钥路径并安装强制匹配>步骤 2：手动指定密钥路径并安装（强制匹配）</a></li><li><a href=#步骤-3可选手动编辑-mysql-源配置文件>步骤 3：（可选）手动编辑 MySQL 源配置文件</a></li></ol></li><li><a href=#2-启动-mysql-服务>2. 启动 MySQL 服务</a></li></ol></li><li><a href=#本地rpm包安装mysql57centosrhel-7-适用>本地RPM包安装MySQL5.7（CentOS/RHEL 7+ 适用）</a><ol><li><a href=#前置说明>前置说明</a></li><li><a href=#第一步彻底卸载残留含mysqlmariadb>第一步：彻底卸载残留（含MySQL/MariaDB）</a></li><li><a href=#第二步安装依赖包避免rpm安装失败>第二步：安装依赖包（避免RPM安装失败）</a></li><li><a href=#第三步安装mysql-rpm包使用你现有包>第三步：安装MySQL RPM包（使用你现有包）</a></li><li><a href=#第四步解决端口冲突3306端口被docker占用处理>第四步：解决端口冲突（3306端口被Docker占用处理）</a></li><li><a href=#第五步mysql启动>第五步：MySQL启动</a></li></ol></li><li><a href=#源码编译安装>源码编译安装</a></li><li><a href=#二进制包安装免编译>二进制包安装（免编译）</a></li><li><a href=#docker-容器化安装>Docker 容器化安装</a></li><li><a href=#初始化配置mysql获取临时密码修改密码>初始化配置MySQL（获取临时密码+修改密码）</a><ol><li><a href=#验证mysql可用>验证MySQL可用</a></li><li><a href=#5-mysql-基本使用>5. MySQL 基本使用</a></li><li><a href=#6-常用-mysql-管理命令>6. 常用 MySQL 管理命令</a></li></ol></li><li><a href=#常见导致启动失败的日志提示及解决方法>常见导致启动失败的日志提示及解决方法：</a><ol><li><ol><li><a href=#常见问题排查遇到报错直接用>常见问题排查（遇到报错直接用）</a></li><li><a href=#1-日志中出现-permission-denied权限问题>1. 日志中出现 <code>Permission denied</code>（权限问题）</a></li><li><a href=#2-日志中出现-initialize-database-失败初始化问题>2. 日志中出现 <code>Initialize database</code> 失败（初始化问题）</a></li><li><a href=#3-日志中出现-invalid-configuration配置文件错误>3. 日志中出现 <code>Invalid configuration</code>（配置文件错误）</a></li><li><a href=#4-日志中出现-port-3306-is-already-in-use端口占用>4. 日志中出现 <code>Port 3306 is already in use</code>（端口占用</a></li></ol></li><li><a href=#3-初始化配置>3. 初始化配置</a></li><li><a href=#4-防火墙配置允许远程访问>4. 防火墙配置（允许远程访问）</a></li><li><a href=#6-安全加固推荐>6. 安全加固（推荐）</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/mysql/>MySQL</a></h2><h3 class=article-subtitle>不同安装方式</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-11-07</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 8 分钟</time></div></footer></div></header><section class=article-content><h2 id=官方yum源安装>官方yum源安装</h2><h3 id=1-安装-mysql>1. 安装 MySQL</h3><p>CentOS 7 默认的 yum 源中没有 MySQL，需要先添加官方 yum 源</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 下载MySQL官方yum源</span>
</span></span><span class=line><span class=cl>wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 安装yum源</span>
</span></span><span class=line><span class=cl>sudo rpm -ivh mysql80-community-release-el7-3.noarch.rpm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 安装MySQL服务器</span>
</span></span><span class=line><span class=cl>sudo yum install -y mysql-community-server
</span></span></code></pre></td></tr></table></div></div><h3 id=使用最新的-mysql-gpg-密钥并强制安装>使用最新的 MySQL GPG 密钥并强制安装</h3><h4 id=步骤-1下载并导入最新的-mysql-gpg-密钥>步骤 1：下载并导入最新的 MySQL GPG 密钥</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 下载最新的MySQL 8.0 GPG密钥</span>
</span></span><span class=line><span class=cl>wget https://repo.mysql.com/RPM-GPG-KEY-mysql-2023
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 导入新密钥</span>
</span></span><span class=line><span class=cl>sudo rpm --import RPM-GPG-KEY-mysql-2023
</span></span></code></pre></td></tr></table></div></div><h4 id=步骤-2手动指定密钥路径并安装强制匹配>步骤 2：手动指定密钥路径并安装（强制匹配）</h4><p>如果步骤 1 仍失败，直接在安装命令中指定密钥文件路径：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 强制使用新下载的密钥进行安装</span>
</span></span><span class=line><span class=cl>sudo yum install -y mysql-community-server --nogpgcheck
</span></span></code></pre></td></tr></table></div></div><blockquote><p>注意：<code>--nogpgcheck</code> 会跳过 GPG 验证，仅作为临时解决方法，安装完成后建议重新配置密钥验证。</p></blockquote><h4 id=步骤-3可选手动编辑-mysql-源配置文件>步骤 3：（可选）手动编辑 MySQL 源配置文件</h4><p>如果上述方法仍有问题，检查并修改 MySQL 的 yum 源配置：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 编辑MySQL源配置</span>
</span></span><span class=line><span class=cl>sudo vi /etc/yum.repos.d/mysql-community.repo
</span></span></code></pre></td></tr></table></div></div><p>找到 <code>[mysql80-community]</code> 段落，确保 <code>gpgkey</code> 指向正确的密钥文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[mysql80-community]</span>
</span></span><span class=line><span class=cl><span class=na>name</span><span class=o>=</span><span class=s>MySQL 8.0 Community Server</span>
</span></span><span class=line><span class=cl><span class=na>baseurl</span><span class=o>=</span><span class=s>http://repo.mysql.com/yum/mysql-8.0-community/el/7/$basearch/</span>
</span></span><span class=line><span class=cl><span class=na>enabled</span><span class=o>=</span><span class=s>1</span>
</span></span><span class=line><span class=cl><span class=na>gpgcheck</span><span class=o>=</span><span class=s>1</span>
</span></span><span class=line><span class=cl><span class=na>gpgkey</span><span class=o>=</span><span class=s>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql-2023  # 修改为最新下载的密钥路径</span>
</span></span></code></pre></td></tr></table></div></div><p>保存后重新安装：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo yum clean all
</span></span><span class=line><span class=cl>sudo yum install -y mysql-community-server
</span></span></code></pre></td></tr></table></div></div><h3 id=2-启动-mysql-服务>2. 启动 MySQL 服务</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 启动MySQL服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置开机自启动</span>
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看服务状态</span>
</span></span><span class=line><span class=cl>sudo systemctl status mysqld
</span></span></code></pre></td></tr></table></div></div><h2 id=本地rpm包安装mysql57centosrhel-7-适用>本地RPM包安装MySQL5.7（CentOS/RHEL 7+ 适用）</h2><h3 id=前置说明>前置说明</h3><ul><li>适用系统：CentOS 7/8、RHEL 7/8（兼容你的nginx-server环境）</li><li>安装方式：优先使用现有RPM包（避免编译麻烦，适配性更强）</li><li>核心流程：卸载残留→安装依赖→RPM包安装→解决端口冲突→初始化配置→开机自启</li></ul><hr><h3 id=第一步彻底卸载残留含mysqlmariadb>第一步：彻底卸载残留（含MySQL/MariaDB）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 查询已安装的MySQL/MariaDB包（避免漏卸）</span>
</span></span><span class=line><span class=cl>rpm -qa <span class=p>|</span> grep -E <span class=s1>&#39;mysql|mariadb&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 卸载所有查询到的包（替换为上一步查询结果，或直接执行批量卸载）</span>
</span></span><span class=line><span class=cl>yum remove -y <span class=k>$(</span>rpm -qa <span class=p>|</span> grep -E <span class=s1>&#39;mysql|mariadb&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 清理残留文件/目录</span>
</span></span><span class=line><span class=cl>rm -rf /var/lib/mysql  <span class=c1># 数据目录（彻底删除，无重要数据再执行）</span>
</span></span><span class=line><span class=cl>rm -rf /etc/my.cnf     <span class=c1># 配置文件</span>
</span></span><span class=line><span class=cl>rm -rf /var/log/mysqld.log  <span class=c1># 日志文件</span>
</span></span><span class=line><span class=cl>rm -rf /var/run/mysqld  <span class=c1># PID目录</span>
</span></span><span class=line><span class=cl>rm -rf /usr/local/mysql  <span class=c1># 若之前有二进制安装残留，一并删除</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=第二步安装依赖包避免rpm安装失败>第二步：安装依赖包（避免RPM安装失败）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 安装MySQL依赖的系统库（必装，解决大部分依赖缺失问题）</span>
</span></span><span class=line><span class=cl>yum install -y libaio numactl-libs perl
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=第三步安装mysql-rpm包使用你现有包>第三步：安装MySQL RPM包（使用你现有包）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 进入RPM包所在目录（你的包在/root/1106，直接cd进入）</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> /root/1106
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 批量安装所有MySQL RPM包（自动处理依赖关系）</span>
</span></span><span class=line><span class=cl>yum localinstall mysql-community-*.rpm -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 验证安装是否成功（显示mysql相关包即正常）</span>
</span></span><span class=line><span class=cl>rpm -qa <span class=p>|</span> grep mysql-community
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=第四步解决端口冲突3306端口被docker占用处理>第四步：解决端口冲突（3306端口被Docker占用处理）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 检查3306端口占用情况（确认是否为docker-proxy）</span>
</span></span><span class=line><span class=cl>ss -tulpn <span class=p>|</span> grep <span class=m>3306</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 方案A：停止占用3306的Docker容器（优先，保留3306端口）</span>
</span></span><span class=line><span class=cl><span class=c1># 查找映射3306的容器</span>
</span></span><span class=line><span class=cl>docker ps <span class=p>|</span> grep <span class=m>3306</span>
</span></span><span class=line><span class=cl><span class=c1># 停止并删除容器（替换为实际容器ID/名称）</span>
</span></span><span class=line><span class=cl>docker stop 容器ID/容器名
</span></span><span class=line><span class=cl>docker rm 容器ID/容器名
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 方案B：修改MySQL端口（若Docker容器不能停，改用3307端口）</span>
</span></span><span class=line><span class=cl><span class=c1># 编辑MySQL配置文件</span>
</span></span><span class=line><span class=cl>vi /etc/my.cnf
</span></span><span class=line><span class=cl><span class=c1># 在[mysqld]段添加以下内容（替换端口为3307）</span>
</span></span><span class=line><span class=cl><span class=o>[</span>mysqld<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>port</span><span class=o>=</span><span class=m>3307</span>
</span></span><span class=line><span class=cl><span class=nv>basedir</span><span class=o>=</span>/usr
</span></span><span class=line><span class=cl><span class=nv>datadir</span><span class=o>=</span>/var/lib/mysql
</span></span><span class=line><span class=cl><span class=nv>socket</span><span class=o>=</span>/var/lib/mysql/mysql.sock
</span></span><span class=line><span class=cl><span class=nv>user</span><span class=o>=</span>mysql
</span></span><span class=line><span class=cl>skip-name-resolve
</span></span><span class=line><span class=cl>log-error<span class=o>=</span>/var/log/mysqld.log
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=第五步mysql启动>第五步：MySQL启动</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 修复数据目录权限（避免启动时权限不足）</span>
</span></span><span class=line><span class=cl>chown -R mysql:mysql /var/lib/mysql
</span></span><span class=line><span class=cl>chown -R mysql:mysql /var/log/mysqld.log
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> /var/lib/mysql
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>报错用<span class=sb>`</span><span class=c1>##`的方案</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 1. 停止所有残留MySQL进程</span>
</span></span><span class=line><span class=cl>systemctl stop mysqld
</span></span><span class=line><span class=cl>pkill -9 mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 2. 清空数据目录（重新生成系统表）</span>
</span></span><span class=line><span class=cl>rm -rf /var/lib/mysql/*  <span class=c1># 清空现有数据（无重要数据）</span>
</span></span><span class=line><span class=cl>chown -R mysql:mysql /var/lib/mysql
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> /var/lib/mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## 3. 重新初始化（生成mysql.plugin等系统表）</span>
</span></span><span class=line><span class=cl>mysqld --initialize --user<span class=o>=</span>mysql --datadir<span class=o>=</span>/var/lib/mysql --basedir<span class=o>=</span>/usr
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 2. 启动MySQL服务</span>
</span></span><span class=line><span class=cl>systemctl start mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 检查服务状态（显示active (running)即成功）</span>
</span></span><span class=line><span class=cl>systemctl status mysqld -l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 设置开机自启（避免服务器重启后服务失效）</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> mysqld
</span></span></code></pre></td></tr></table></div></div><h2 id=源码编译安装>源码编译安装</h2><p>通过编译 MySQL 源码包进行安装，可自定义编译参数（如指定安装路径、启用 / 禁用功能模块等），适合对 MySQL 有深度定制需求的场景。
大致步骤：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 安装编译依赖</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>yum install -y gcc gcc-c++ cmake make ncurses-devel openssl-devel
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 下载源码包（以MySQL 8.0为例）</span>
</span></span><span class=line><span class=cl>wget https://dev.mysql.com/get/Downloads/MySQL-8.0/mysql-8.0.34.tar.gz
</span></span><span class=line><span class=cl>tar -zxvf mysql-8.0.34.tar.gz
</span></span><span class=line><span class=cl><span class=nb>cd</span> mysql-8.0.34
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 配置编译参数（示例：指定安装路径、启用SSL等）</span>
</span></span><span class=line><span class=cl>cmake . -DCMAKE_INSTALL_PREFIX<span class=o>=</span>/usr/local/mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>        -DMYSQL_DATADIR<span class=o>=</span>/var/lib/mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>        -DENABLED_LOCAL_INFILE<span class=o>=</span>ON <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>        -DWITH_SSL<span class=o>=</span>system
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 编译并安装（耗时较长，根据服务器性能而定）</span>
</span></span><span class=line><span class=cl>make <span class=o>&amp;&amp;</span> make install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 后续配置（创建用户、初始化数据库、配置服务等）</span>
</span></span><span class=line><span class=cl>useradd -r -s /sbin/nologin mysql
</span></span><span class=line><span class=cl>chown -R mysql:mysql /usr/local/mysql /var/lib/mysql
</span></span><span class=line><span class=cl>/usr/local/mysql/bin/mysqld --initialize --user<span class=o>=</span>mysql --datadir<span class=o>=</span>/var/lib/mysql
</span></span></code></pre></td></tr></table></div></div><h2 id=二进制包安装免编译>二进制包安装（免编译）</h2><p>MySQL 官方提供预编译的二进制分发版（.tar.gz格式），解压后即可使用，无需编译，比源码安装更快捷，适合需要快速部署且有一定自定义需求的场景。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 下载二进制包（以MySQL 5.7为例）</span>
</span></span><span class=line><span class=cl>wget https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz
</span></span><span class=line><span class=cl>tar -zxvf mysql-5.7.43-linux-glibc2.12-x86_64.tar.gz -C /usr/local/
</span></span><span class=line><span class=cl>ln -s /usr/local/mysql-5.7.43-linux-glibc2.12-x86_64 /usr/local/mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 初始化配置（类似源码安装）</span>
</span></span><span class=line><span class=cl>useradd -r -s /sbin/nologin mysql
</span></span><span class=line><span class=cl>chown -R mysql:mysql /usr/local/mysql /var/lib/mysql
</span></span><span class=line><span class=cl>/usr/local/mysql/bin/mysqld --initialize --user<span class=o>=</span>mysql --datadir<span class=o>=</span>/var/lib/mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 配置环境变量和服务启动脚本</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;export PATH=$PATH:/usr/local/mysql/bin&#39;</span> &gt;&gt; /etc/profile
</span></span><span class=line><span class=cl><span class=nb>source</span> /etc/profile
</span></span><span class=line><span class=cl>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> mysqld
</span></span></code></pre></td></tr></table></div></div><h2 id=docker-容器化安装>Docker 容器化安装</h2><p>通过 Docker 运行 MySQL 容器，隔离性强、部署快速，适合开发、测试环境或需要快速扩缩容的场景，避免与主机环境冲突。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 拉取MySQL镜像（指定版本，如8.0或5.7）</span>
</span></span><span class=line><span class=cl>docker pull mysql:8.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 启动容器（映射端口、挂载数据卷持久化数据）</span>
</span></span><span class=line><span class=cl>docker run -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name mysql8 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 3306:3306 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v /data/mysql8:/var/lib/mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span>RootPass123! <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  mysql:8.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 进入容器操作MySQL</span>
</span></span><span class=line><span class=cl>docker <span class=nb>exec</span> -it mysql8 mysql -u root -p
</span></span></code></pre></td></tr></table></div></div><h2 id=初始化配置mysql获取临时密码修改密码>初始化配置MySQL（获取临时密码+修改密码）</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 查找MySQL临时密码（首次安装自动生成）</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;temporary password&#39;</span> /var/log/mysqld.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 用临时密码登录MySQL（若修改了端口，添加-P3307参数）</span>
</span></span><span class=line><span class=cl><span class=c1># 默认端口登录：</span>
</span></span><span class=line><span class=cl>mysql -uroot -pXXXX                   <span class=sb>`</span>XXXX<span class=sb>`</span>是你临时密码
</span></span><span class=line><span class=cl><span class=c1># 改端口后登录（3307为例）：</span>
</span></span><span class=line><span class=cl>mysql -uroot -p -P3307
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 登录后修改root密码（替换为你的新密码，需包含大小写+数字+特殊字符）强密码，才行</span>
</span></span><span class=line><span class=cl>1. 先按默认策略设置一个临时强密码（完成初始重置）
</span></span><span class=line><span class=cl>执行以下命令（密码需满足：大小写 + 数字 + 特殊字符，长度≥8 位）：
</span></span><span class=line><span class=cl>ALTER USER <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;localhost&#39;</span> IDENTIFIED BY <span class=s1>&#39;TempPass123!&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>2. 再次查看密码策略变量（此时已可执行）
</span></span><span class=line><span class=cl>SHOW VARIABLES LIKE <span class=s1>&#39;validate_password%&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>3. （可选）降低密码策略（如需简单密码）
</span></span><span class=line><span class=cl>若需要设置简单密码，继续执行：
</span></span><span class=line><span class=cl>-- 降低策略为LOW（仅检查长度≥8位）
</span></span><span class=line><span class=cl><span class=nb>set</span> global <span class=nv>validate_password_policy</span><span class=o>=</span>LOW<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nb>set</span> global <span class=nv>validate_password_length</span><span class=o>=</span>8<span class=p>;</span> 后面数字可以自己修改
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-- 此时可设置简单密码（如8位纯数字）
</span></span><span class=line><span class=cl>ALTER USER <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;localhost&#39;</span> IDENTIFIED BY <span class=s1>&#39;12345678&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. （可选）允许root远程登录（方便外部连接，生产环境谨慎开启）</span>
</span></span><span class=line><span class=cl>use mysql<span class=p>;</span>
</span></span><span class=line><span class=cl>update user <span class=nb>set</span> <span class=nv>host</span><span class=o>=</span><span class=s1>&#39;%&#39;</span> where <span class=nv>user</span><span class=o>=</span><span class=s1>&#39;root&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>flush privileges<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 退出MySQL</span>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span></code></pre></td></tr></table></div></div><hr><h3 id=验证mysql可用>验证MySQL可用</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 重新登录MySQL（验证密码是否生效）</span>
</span></span><span class=line><span class=cl>mysql -uroot -p<span class=s1>&#39;123123&#39;</span>  <span class=c1># 默认端口</span>
</span></span><span class=line><span class=cl><span class=c1># 或改端口后登录：</span>
</span></span><span class=line><span class=cl>mysql -uroot -p<span class=s1>&#39;123123&#39;</span> -P3307
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 执行简单查询（显示数据库列表即正常）</span>
</span></span><span class=line><span class=cl>show databases<span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=5-mysql-基本使用>5. MySQL 基本使用</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 登录MySQL</span>
</span></span><span class=line><span class=cl>mysql -u root -p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建数据库</span>
</span></span><span class=line><span class=cl>CREATE DATABASE mydb<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看所有数据库</span>
</span></span><span class=line><span class=cl>SHOW DATABASES<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用指定数据库</span>
</span></span><span class=line><span class=cl>USE mydb<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建表</span>
</span></span><span class=line><span class=cl>CREATE TABLE users <span class=o>(</span>
</span></span><span class=line><span class=cl>    id INT AUTO_INCREMENT PRIMARY KEY,
</span></span><span class=line><span class=cl>    name VARCHAR<span class=o>(</span>50<span class=o>)</span> NOT NULL,
</span></span><span class=line><span class=cl>    email VARCHAR<span class=o>(</span>100<span class=o>)</span> UNIQUE NOT NULL,
</span></span><span class=line><span class=cl>    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
</span></span><span class=line><span class=cl><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 插入数据</span>
</span></span><span class=line><span class=cl>INSERT INTO users <span class=o>(</span>name, email<span class=o>)</span> VALUES <span class=o>(</span><span class=s1>&#39;John Doe&#39;</span>, <span class=s1>&#39;john@example.com&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查询数据</span>
</span></span><span class=line><span class=cl>SELECT * FROM users<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 更新数据</span>
</span></span><span class=line><span class=cl>UPDATE users SET <span class=nv>name</span> <span class=o>=</span> <span class=s1>&#39;Jane Doe&#39;</span> WHERE <span class=nv>id</span> <span class=o>=</span> 1<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除数据</span>
</span></span><span class=line><span class=cl>DELETE FROM users WHERE <span class=nv>id</span> <span class=o>=</span> 1<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 退出MySQL</span>
</span></span><span class=line><span class=cl>exit<span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=6-常用-mysql-管理命令>6. 常用 MySQL 管理命令</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 重启MySQL服务</span>
</span></span><span class=line><span class=cl> systemctl restart mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 停止MySQL服务</span>
</span></span><span class=line><span class=cl> systemctl stop mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看MySQL版本</span>
</span></span><span class=line><span class=cl>mysql --version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 备份数据库</span>
</span></span><span class=line><span class=cl>mysqldump -u root -p mydb &gt; mydb_backup.sql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 恢复数据库</span>
</span></span><span class=line><span class=cl>mysql -u root -p mydb &lt; mydb_backup.sql
</span></span></code></pre></td></tr></table></div></div><h2 id=常见导致启动失败的日志提示及解决方法>常见导致启动失败的日志提示及解决方法：</h2><h4 id=常见问题排查遇到报错直接用>常见问题排查（遇到报错直接用）</h4><ol><li>启动失败：查看错误日志 <code>cat /var/log/mysqld.log | grep -i error</code></li><li>密码忘记：停止服务→跳过授权表启动→重置密码（模板外补充，需可联系）</li><li>远程连接失败：检查防火墙开放3306/3307端口 <code>firewall-cmd --permanent --add-port=3307/tcp && firewall-cmd --reload</code></li></ol><h4 id=1-日志中出现-permission-denied权限问题>1. 日志中出现 <code>Permission denied</code>（权限问题）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 修复MySQL数据目录权限（关键目录必须归mysql用户所有）</span>
</span></span><span class=line><span class=cl>sudo chown -R mysql:mysql /var/lib/mysql
</span></span><span class=line><span class=cl>sudo chmod -R <span class=m>755</span> /var/lib/mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重启服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start mysqld
</span></span></code></pre></td></tr></table></div></div><h4 id=2-日志中出现-initialize-database-失败初始化问题>2. 日志中出现 <code>Initialize database</code> 失败（初始化问题）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 先停止服务（如果处于启动中）</span>
</span></span><span class=line><span class=cl>sudo systemctl stop mysqld
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 清空数据目录（注意：会删除所有数据，首次安装适用）</span>
</span></span><span class=line><span class=cl>sudo rm -rf /var/lib/mysql/*
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重新初始化数据库</span>
</span></span><span class=line><span class=cl>sudo mysqld --initialize --user<span class=o>=</span>mysql --basedir<span class=o>=</span>/usr --datadir<span class=o>=</span>/var/lib/mysql
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start mysqld
</span></span></code></pre></td></tr></table></div></div><h4 id=3-日志中出现-invalid-configuration配置文件错误>3. 日志中出现 <code>Invalid configuration</code>（配置文件错误）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 检查并编辑MySQL配置文件（通常是/etc/my.cnf）</span>
</span></span><span class=line><span class=cl>sudo vi /etc/my.cnf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 注释或删除错误的配置项（例如：无效的参数、路径错误等）</span>
</span></span><span class=line><span class=cl><span class=c1># 保存后重启服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start mysqld
</span></span></code></pre></td></tr></table></div></div><h4 id=4-日志中出现-port-3306-is-already-in-use端口占用>4. 日志中出现 <code>Port 3306 is already in use</code>（端口占用</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查找占用3306端口的进程</span>
</span></span><span class=line><span class=cl> netstat -tulpn <span class=p>|</span> grep <span class=m>3306</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 终止占用进程（假设进程ID为1234）</span>
</span></span><span class=line><span class=cl> <span class=nb>kill</span> -9 <span class=m>1234</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重启服务</span>
</span></span><span class=line><span class=cl> systemctl start mysqld
</span></span></code></pre></td></tr></table></div></div><h3 id=3-初始化配置>3. 初始化配置</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 获取初始密码</span>
</span></span><span class=line><span class=cl>sudo grep <span class=s1>&#39;temporary password&#39;</span> /var/log/mysqld.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 登录MySQL（使用上面获取的初始密码）</span>
</span></span><span class=line><span class=cl>mysql -u root -p
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修改密码（MySQL8.0以上要求密码包含大小写字母、数字和特殊字符）</span>
</span></span><span class=line><span class=cl>ALTER USER <span class=s1>&#39;root&#39;</span>@<span class=s1>&#39;localhost&#39;</span> IDENTIFIED BY <span class=s1>&#39;NewPassword@123&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 允许远程访问（可选）</span>
</span></span><span class=line><span class=cl>use mysql<span class=p>;</span>
</span></span><span class=line><span class=cl>update user <span class=nb>set</span> <span class=nv>host</span> <span class=o>=</span> <span class=s1>&#39;%&#39;</span> where <span class=nv>user</span> <span class=o>=</span> <span class=s1>&#39;root&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>FLUSH PRIVILEGES<span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=4-防火墙配置允许远程访问>4. 防火墙配置（允许远程访问）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 开放3306端口</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --zone<span class=o>=</span>public --add-port<span class=o>=</span>3306/tcp --permanent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重新加载防火墙配置</span>
</span></span><span class=line><span class=cl>sudo firewall-cmd --reload
</span></span></code></pre></td></tr></table></div></div><h3 id=6-安全加固推荐>6. 安全加固（推荐）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 运行安全脚本，按照提示进行配置</span>
</span></span><span class=line><span class=cl>sudo mysql_secure_installation
</span></span></code></pre></td></tr></table></div></div><p>这个脚本会引导你完成一系列安全设置，包括：</p><ul><li>设置 root 密码</li><li>移除匿名用户</li><li>禁止 root 远程登录</li><li>移除测试数据库</li><li>重新加载权限表</li></ul></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>本文采用 CC BY-NC-SA 4.0 许可协议</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/posts/docker/><div class=article-details><h2 class=article-title>docker</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2025 © 2025 win. 保留所有权利.</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>