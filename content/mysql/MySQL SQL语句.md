---
title: MySQL SQLè¯­å¥
description: 
date: 2025-12-08
categories:
    - 
    - 
---
MySQL SQLè¯­å¥



```bash
ä¸­æ–‡   è‹±æ–‡å¯¹åº”ï¼ˆCRUDï¼‰  SQLå‘½ä»¤       ä½œç”¨
å¢         create        INSERT       å¾€è¡¨ä¸­æ·»åŠ æ–°çš„æ•°æ®è¡Œ
åˆ          delete       DELETE       ç§»é™¤è¡¨ä¸­çš„æ•°æ®
æ”¹         update       UPDATE       ä¿®æ”¹è¡¨ä¸­å·²å­˜åœ¨çš„æ•°æ®
æŸ¥         read         SELECT       ä»è¡¨ç§æ£€ç´¢æ•°æ®
```



```bash 
å¢(Create)- INSERT

INSERT INTO è¡¨å ï¼ˆåˆ—1ï¼Œåˆ—2ï¼‰ VALUES ï¼ˆå€¼1ï¼Œå€¼2ï¼‰;
Â·å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼ˆæ¯”å¦‚åå­—ï¼‰ï¼Œéœ€è¦ç”¨å•å¼•å·''åŒ…èµ·æ¥
Â·å¦‚æœæ˜¯æ•°å­—ï¼ˆæ¯”å¦‚åˆ†æ•°ï¼‰ï¼Œç›´æ¥å†™å°±å¥½
SQLéœ€è¦å…ˆçŸ¥é“ä½ è¦å¾€é‚£äº›â€œåˆ—â€å¡«æ•°æ®ï¼Œç„¶åå†å‘Šè¯‰å®ƒå…·ä½“çš„â€œå€¼â€æ˜¯ä»€ä¹ˆ
ä¾‹1ï¼šå¦‚æœæƒ³å¾€student_scoresè¡¨é‡Œæ·»åŠ ä¸€ä¸ªåå«'å¼ ä¸‰',åˆ†æ•°ä¸º90çš„å­¦ç”Ÿï¼Œæ€ä¹ˆå†™SQLè¯­å¥ï¼Ÿ
  INSERT INTO student_scores (name,score) VALUES ï¼ˆ'å¼ ä¸‰'ï¼Œ90ï¼‰ï¼›
  
```



```bash
æŸ¥(Read)-SELECT

SELECT ä½ æƒ³è¦çš„åˆ— FROM è¡¨åï¼›
Â· *:è¿™ä¸ª*å°±æ˜¯ä¸€ä¸ªé€šé…ç¬¦ï¼Œå‘Šè¯‰æ•°æ®åº“ï¼šâ€œæˆ‘ä¸æŒ‘ï¼ŒæŠŠè¿™ä¸ªè¡¨é‡Œçš„åˆ—å…¨ç»™æˆ‘æ‹¿å‡ºæ¥ï¼â€

SELECT * FROM è¡¨æ˜ WHERE åˆ—å = å€¼;

ä¾‹1ï¼šåˆ©ç”¨WHEREå­å¥ï¼Œå†™ä¸€æ¡SQLè¯­å¥ï¼ŒåªæŠŠ'å¼ ä¸‰'è¿™ä¸€è¡Œæ•°æ®æŸ¥å‡ºæ¥
SELECT * FROM student_scores WHERE name = 'å¼ ä¸‰';


æ’åº
SELECT * FROM è¡¨å ORDER BY åˆ—å æ’åºè§„åˆ™ï¼›

Â· æ’åºè§„åˆ™æœ‰ä¸¤ç§ï¼š
 Â· ASCï¼šå‡åºï¼Œä»å°åˆ°å¤§ï¼ˆé»˜è®¤å°±æ˜¯è¿™ä¸ªï¼Œå¯ä»¥ä¸å†™ä¹Ÿè¡Œï¼‰
 Â· DESCï¼šé™åºï¼Œä»å¤§åˆ°å°
 
 ä¾‹2ï¼šæˆ‘ä»¬è¦æ‰“å°ä¸€ä»½æˆç»©å•æ’åè¡¨ï¼Œè¦æ±‚åˆ†æ•°ä»é«˜åˆ°ä½æ’åˆ—ï¼Œå†™å‡ºè¿™æ¡SQLè¯­å¥
 SELECT * FROM student_scores ORDER BY score DESC;
 
é™åˆ¶æ•°é‡
 
 SELECT * FROM è¡¨å LIMIT æ•°é‡ï¼›
 
 ä¾‹3ï¼šå†™ä¸€æ¡SQLï¼Œåªæ˜¾ç¤ºåˆ†æ•°æœ€é«˜çš„3ä½
 
 SELECT * FORM student_scores ORDER BY score DESC LIMIT 3;
 Â· ORDER BY score DESC:å…ˆæŠŠæ‰€æœ‰åŒå­¦æŒ‰åˆ†æ•°ä»é«˜åˆ°ä½æ’å¥½é˜Ÿ

æ¨¡ç³ŠæŸ¥è¯¢ LIKE
æœ‰æ—¶å€™æˆ‘ä»¬æŸ¥è¯¢æŸä¸€ç±»æ•°æ®ï¼Œè®°ä¸èµ·æ¥å…·ä½“æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç®¡=å·ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨LIKEæ“ä½œç¬¦ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é…åˆLIKEä½¿ç”¨çš„ç™¾åˆ†å·%ï¼Œå®ƒ%ä»£è¡¨â€œä»»æ„å¤šä¸ªå­—ç¬¦â€

ä¾‹4ï¼šæŸ¥æ‰¾å‡ºæ‰€æœ‰å§“â€œå¼ â€çš„åŒå­¦
SELECT * FROM student_scores WHERE name LIKE 'å¼ %'ï¼›


åˆ†ç»„
GROUP BYçš„ä½œç”¨å°±æ˜¯æŠŠåŸæœ¬æ•£ä¹±çš„æ¯ä¸€è¡Œæ•°æ®ï¼ŒæŒ‰ç…§ä½ æŒ‡å®šçš„åˆ—ï¼Œâ€œæâ€åœ¨ä¸€èµ·

SELECT ç±»åˆ«åˆ—ï¼Œèšåˆå‡½æ•°ï¼ˆç»Ÿè®¡åˆ—ï¼‰
FROM è¡¨å
GROUP BY ç±»åˆ«åˆ—ï¼›

ä¾‹5ï¼šç®—å‡ºæ¯ä¸ªç­çº§çš„å¹³å‡æ•°
SELECT class,AVG(score) FROM student_scores GROUP BY class;

åˆ†ç»„åçš„è¿‡æ»¤ï¼ˆHAVING)
SELECT ç±»åˆ«åˆ—ï¼Œèšåˆå‡½æ•°ï¼ˆç»Ÿè®¡åˆ—ï¼‰
FROM è¡¨å
GROUP BY ç±»åˆ«åˆ—
HAVING èšåˆå‡½æ•°ï¼ˆç»Ÿè®¡åˆ—ï¼‰> å€¼ï¼›

å‡¡æ˜¯è¡¨é‡Œæœ¬æ¥å°±æœ‰åˆ—ï¼Œç”¨WHEREç­›ï¼›å‡¡æ˜¯åæ¥ç®—å‡ºæ¥çš„ç»“æœï¼ˆæ¯”å¦‚å¹³å‡æ•°ã€æ€»æ•°ï¼‰ï¼Œç”¨HAVINGç­›ã€‚
ä¾‹6ï¼šåªæ˜¾ç¤ºå¹³å‡åˆ†ï¼ˆAVGï¼ˆscore))å¤§äº85çš„ç­çº§
SELECT classï¼ŒAVGï¼ˆscoreï¼‰FROM student_scores GROUP BY class HAVING AVG(score) > 85;


å¤šè¡¨æŸ¥è¯¢
INNER JOIN ï¼ˆå†…è¿æ¥ï¼‰
INNER JOINå°±åƒæŠŠä¸¤å¼ è¡¨æ‹¿æ¥å¯¹æš—å·ï¼Œåªæœ‰å½“ä¸¤å¼ è¡¨çš„å…³è”å­—æ®µèƒ½å¯¹ä¸Šå·æ—¶ï¼Œå®ƒæ‰ä¼šæŠŠè¿™ä¸€è¡Œæ•°æ®æ‹¼åœ¨ä¸€èµ·ã€‚

SELECT è¡¨1.åˆ—åï¼Œè¡¨2.åˆ—å
FROM è¡¨1
INNER JOIN è¡¨2
ON è¡¨1.å…³è”åˆ— = è¡¨2.å…³è”åˆ—ï¼›

ä¾‹7ï¼šå°† students è¡¨å’Œ classes è¡¨è¿æ¥èµ·æ¥ã€‚ å…³è”æ¡ä»¶æ˜¯ï¼šstudents è¡¨çš„ class_id ç­‰äº classes è¡¨çš„ idã€‚ æˆ‘ä»¬éœ€è¦æŸ¥è¯¢çš„ç»“æœæ˜¯ï¼šstudents.name å’Œ classes.teacher

SELECT students.name,classes.teacher FROM students INNER JOIN classes ON students.class_id = classes.id;

å·¦è¿æ¥ï¼ˆLEFT JOIN)
å·¦è¾¹çš„è¡¨ï¼ˆä¸»è¡¨ï¼‰æœ€å¤§ï¼Œä¸ç®¡å³è¾¹æœ‰æ²¡æœ‰å¯¹åº”çš„ï¼Œå·¦è¾¹çš„éƒ½è¦å…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥

SELECT students.name, classes.teacher
FROM students  -- ğŸ‘ˆ è¿™æ˜¯å·¦è¡¨
LEFT JOIN classes -- ğŸ‘‰ è¿™æ˜¯å³è¡¨
ON students.class_id = classes.id;

ä¾‹8ï¼šè¯·ä½ ç›´æ¥å¤åˆ¶ä¸Šé¢çš„è¯­æ³•æ€è·¯ï¼Œå†™å‡ºè¿™æ¡ LEFT JOIN è¯­å¥ã€‚ æƒ³ä¸€æƒ³ï¼ŒæŸ¥è¯¢ç»“æœé‡Œï¼Œ'å°æ˜' çš„ teacher é‚£ä¸€æ ä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿï¼ˆå¯ä»¥çŒœä¸€ä¸‹ï¼‰

åœ¨æ•°æ®åº“ä¸­ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ•°æ®ï¼Œè¯¥ä½ç½®å°±ä¼šæ˜¾ç¤ºä¸º NULLï¼ˆç©ºå€¼ï¼‰


```



```bash
æ”¹ï¼ˆUpdateï¼‰- UPDATE

UPDATE è¡¨å SET è¦ä¿®æ”¹çš„åˆ— = æ–°å€¼ WHERE æ¡ä»¶åˆ— = æŸå€¼;

ä¾‹1ï¼šå¸®'å¼ ä¸‰'è¯¥åˆ†æ•°ï¼Œå†™ä¸€æ¡SQLè¯­å¥ï¼Œå°†student_scoresè¡¨ä¸­ï¼Œå‘½ä»¤æ˜¯'å¼ ä¸‰'çš„é‚£ä¸€è¡Œï¼Œscoreä¿®æ”¹ä¸º95

UPDATE student_scores SET score = 95 WHERE name = 'å¼ ä¸‰'ï¼›

```



```bash
åˆ (Delete)- DELETE

DELETE FROM è¡¨å WHERE æ¡ä»¶åˆ— = æŸå€¼;

ä¾‹1ï¼šå†™ä¸€æ¡SQLè¯­å¥ï¼Œå®‰å…¨åœ°å°†'æå››'ä»student_scoresè¡¨ä¸­åˆ é™¤

DELETE FROM student_scores WHERE name = 'æå››'ï¼›

```







```bash

å»ºè¡¨
åœ¨ SQL ä¸­ï¼Œåˆ›å»ºæ–°è¡¨ä½¿ç”¨ CREATE TABLE å‘½ä»¤ã€‚è¿™å°±å¥½æ¯”ä½ åœ¨ Excel é‡Œæ–°å»ºä¸€ä¸ª Sheetï¼Œå¹¶ä¸”è§„å®šå¥½æ¯ä¸€åˆ—å«ä»€ä¹ˆåå­—ï¼Œåªèƒ½å¡«ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚

ç¬¬ä¸€æ­¥ï¼šè®¤è¯†â€œåŸææ–™â€ (æ•°æ®ç±»å‹)
åœ¨é€ è¡¨ä¹‹å‰ï¼Œä½ å¿…é¡»å‘Šè¯‰æ•°æ®åº“ï¼Œæ¯ä¸€åˆ—å°†æ¥è¦å­˜ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚MySQL é‡Œæœ€å¸¸ç”¨çš„ä¸‰ç§ç±»å‹æ˜¯ï¼š
INTï¼šæ•´æ•°ã€‚ç”¨æ¥å­˜ IDã€å¹´é¾„ã€æ•°é‡ã€‚ï¼ˆä¾‹å¦‚ï¼š101, 25ï¼‰
VARCHAR(n)ï¼šå¯å˜é•¿åº¦å­—ç¬¦ä¸²ã€‚ç”¨æ¥å­˜åå­—ã€é‚®ç®±ã€åœ°å€ã€‚
n ä»£è¡¨æœ€å¤§é•¿åº¦ã€‚æ¯”å¦‚ VARCHAR(50) æ„æ€æ˜¯æœ€å¤šå­˜ 50 ä¸ªå­—ç¬¦ã€‚
DATEï¼šæ—¥æœŸã€‚ç”¨æ¥å­˜ç”Ÿæ—¥ã€å…¥èŒæ—¶é—´ã€‚ï¼ˆä¾‹å¦‚ï¼š'2023-01-01'ï¼‰

ç¬¬äºŒæ­¥ï¼šç¡®ç«‹â€œèº«ä»½è¯â€ (ä¸»é”® PRIMARY KEY) ğŸ”‘
è¿™æ˜¯å»ºè¡¨æ—¶æœ€é‡è¦çš„æ¦‚å¿µï¼
æ¯ä¸€å¼ è¡¨æœ€å¥½éƒ½æœ‰ä¸€ä¸ªä¸»é”® (Primary Key)ã€‚å®ƒæ˜¯æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚
å°±åƒæ¯ä¸ªå…¬æ°‘éƒ½æœ‰å”¯ä¸€çš„èº«ä»½è¯å·ã€‚
è§„åˆ™ï¼šä¸»é”®çš„å€¼ä¸èƒ½é‡å¤ï¼Œä¹Ÿä¸èƒ½ä¸ºç©ºã€‚
é€šå¸¸æˆ‘ä»¬ä¼šæŠŠ id åˆ—è®¾ä¸ºä¸»é”®ã€‚



CREATE TABLE è¡¨å (
    åˆ—å1 æ•°æ®ç±»å‹,
    åˆ—å2 æ•°æ®ç±»å‹,
    ...
    PRIMARY KEY (ä¸»é”®åˆ—å)
);



ä¾‹1ï¼šè¯·ä½ è®¾è®¡ä¸€å¼ å…¨æ–°çš„ students è¡¨ï¼Œè¦æ±‚åŒ…å«ä»¥ä¸‹ä¸‰åˆ—ï¼š
idï¼šç±»å‹æ˜¯ INTï¼ˆè¿™æ˜¯ä¸»é”®ï¼ï¼‰ã€‚
nameï¼šç±»å‹æ˜¯ VARCHAR(50)ï¼ˆåå­—æœ€é•¿ 50 ä¸ªå­—è¶³å¤Ÿäº†ï¼‰ã€‚
ageï¼šç±»å‹æ˜¯ INTã€‚
è¯·å°è¯•å†™å‡ºå®Œæ•´çš„ SQL è¯­å¥ï¼ (æç¤ºï¼šæ³¨æ„æ‹¬å·çš„ä½ç½®ï¼Œæœ€ååˆ«å¿˜äº†åˆ†å·)
CREATE TABLE students (  id INT, name VARCHAR(50), age INT, PRIMARY KEY (id) );



ä¾‹2ï¼šè®¾è®¡ teachers è¡¨
ç°åœ¨è¯·ä½ åˆ©ç”¨è¿™ä¸¤ä¸ªæ–°æ­¦å™¨ï¼Œè®¾è®¡ä¸€å¼ æ›´å®Œç¾çš„ teachers (æ•™å¸ˆè¡¨)ã€‚
è¦æ±‚ï¼š
idï¼šç±»å‹ INTï¼Œä¸ä»…æ˜¯ ä¸»é”®ï¼Œè¿˜è¦èƒ½ è‡ªåŠ¨å¢é•¿ (AUTO_INCREMENT)ã€‚
nameï¼šç±»å‹ VARCHAR(30)ï¼Œå¹¶ä¸” ä¸å…è®¸ä¸ºç©º (NOT NULL)ã€‚
subject (ç§‘ç›®)ï¼šç±»å‹ VARCHAR(20)ï¼Œè¿™ä¸ªå…è®¸ä¸ºç©ºï¼ˆå¯èƒ½åˆšå…¥èŒè¿˜æ²¡å®šæ•™å•¥ï¼‰ã€‚

åˆ—å æ•°æ®ç±»å‹ NOT NULL AUTO_INCREMENT
(æ³¨æ„ï¼šAUTO_INCREMENTé€šå¸¸åªç”¨äºä¸»é”®)

CREATE TABLE teachers (
    id INT AUTO_INCREMENT,      -- 1. id æ˜¯æ•´æ•°ï¼Œä¸”è‡ªåŠ¨å¢é•¿
    name VARCHAR(30) NOT NULL,  -- 2. name æ˜¯å­—ç¬¦ä¸²ï¼Œä¸”ä¸èƒ½ä¸ºç©º
    subject VARCHAR(20),        -- 3. subject æ˜¯å­—ç¬¦ä¸²ï¼Œå…è®¸ä¸ºç©ºï¼ˆé»˜è®¤ï¼‰
    PRIMARY KEY (id)            -- 4. æŒ‡å®š id ä¸ºä¸»é”®
);


åˆ è¡¨
DROP TABLE è¡¨å;

ä¾‹3ï¼šå‡è®¾åˆšæ‰å»ºç«‹çš„ students è¡¨è®¾è®¡å¾—ä¸å¥½ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒåˆ æ‰é‡æ¥ã€‚ è¯·å†™å‡ºåˆ é™¤ students è¡¨çš„è¯­å¥ã€‚
DROP TABLE students;

```



```bash
åˆ›å»ºç´¢å¼•
ç´¢å¼•å°±ç›¸å½“äºå­—æ®µçš„ç›®å½•
æ³¨æ„ï¼šç´¢å¼•ä¹Ÿæ˜¯æ•°æ®ï¼Œéœ€è¦å ç”¨ç¡¬ç›˜ç©ºé—´ï¼Œå½“ä½ INSERTã€UPDATEã€DELETEæ•°æ®æ—¶ï¼Œæ•°æ®åº“ä¸ä»…è¦ä¿®æ”¹åŸæ•°æ®ï¼Œè¿˜è¦å»ä¿®æ”¹æ‰€æœ‰çš„ç´¢å¼•ç›®å½•ï¼Œç´¢å¼•è¶Šå¤šï¼Œå†™å…¥é€Ÿåº¦è¶Šæ…¢ã€‚
åªç»™ç»å¸¸å‡ºç°åœ¨WHERE åé¢çš„åˆ—ï¼Œæˆ–è€…ç»å¸¸ç”¨æ¥æ’åºï¼ˆORDER BY)çš„åˆ—åŠ ç´¢å¼•ã€‚
ä¾‹å‡è®¾æˆ‘ä»¬çš„ students è¡¨é‡Œæœ‰ 100 ä¸‡ ä¸ªå­¦ç”Ÿã€‚æ ¡é•¿ç»å¸¸æŸ¥æŸä¸ªåå­—ï¼Œæ¯”å¦‚ï¼š
SELECT * FROM students WHERE name = 'å¼ ä¸‰';
å¦‚æœæ²¡æœ‰å¤šå› ï¼Œæ•°æ®åº“ä¼šæŠŠ100ä¸‡è¡Œå…¨éƒ½çœ‹ä¸€é

ä¼˜åŒ–æ–¹æ¡ˆï¼šç»™nameåˆ—åŠ ä¸€ä¸ªç´¢å¼•
CREATE INDEX ç´¢å¼•å ON è¡¨å (åˆ—å);
ï¼ˆæ³¨æ„ï¼šç´¢å¼•åé€šå¸¸ä»¥idx_å¼€å¤´ï¼Œæ–¹ä¾¿è¯†åˆ«ï¼‰

ä¾‹1ï¼šä¸º students è¡¨çš„ name åˆ—åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œç´¢å¼•åå­—å« idx_name
CREATE INDEX idx_name ON students (name);

åˆ é™¤ç´¢å¼•
DROP INDEX ç´¢å¼•å ON è¡¨å;
ä¾‹2:åˆ é™¤ students è¡¨ä¸Šçš„ idx_name ç´¢å¼•
DROP INDEX idx_name ON students;


```



```bash
åŠ è£…ï¼ˆADDï¼‰

ALTER TABLE è¡¨å ADD æ–°åˆ—å æ•°æ®ç±»å‹;
ä¾‹1ï¼šç»™ students è¡¨æ–°å¢ä¸€åˆ— genderï¼Œæ•°æ®ç±»å‹æ˜¯ VARCHAR(4)ï¼ˆå­˜â€œç”·â€æˆ–â€œå¥³â€è¶³å¤Ÿäº†ï¼‰
ALTER TABLE students ADD gender VARCHAR(4);

æ”¹é€ ï¼ˆMODIFYï¼‰
ALTER TABLE è¡¨å MODIFY åˆ—å æ–°çš„æ•°æ®ç±»å‹;

ä¾‹2ï¼šå°† students è¡¨çš„ name åˆ—ä¿®æ”¹ä¸º VARCHAR(100)ï¼Œè®©å®ƒèƒ½å®¹çº³æ›´é•¿çš„åå­—
ALTER TABLE students MODIFY name VARCHAR(100);

æ‹†é™¤ï¼ˆDROPï¼‰
ALTER TABLE è¡¨å DROP COLUMN åˆ—å;
ä¾‹3ï¼šè¯·å†™ä¸€æ¡ SQL è¯­å¥ï¼Œä» students è¡¨ä¸­å½»åº•åˆ é™¤ age è¿™ä¸€åˆ—
ALTER TABLE students DROP COLUMN age;


```





```bash
é€»è¾‘æ‰§è¡Œé¡ºåºï¼š
å…ˆæ‰§è¡Œæ‹¬å·é‡Œçš„ï¼ˆå†…å±‚æŸ¥è¯¢ï¼‰ï¼Œå†æ‰§è¡Œï¼ˆå¤–é¢æŸ¥è¯¢ï¼‰

æ ‡é‡å­æŸ¥è¯¢ï¼ˆè¿”å›ä¸€ä¸ªå€¼ï¼‰
ä¾‹1ï¼šå‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼  products (å•†å“è¡¨)ï¼Œé‡Œé¢æœ‰ name (å•†å“å) å’Œ price (ä»·æ ¼)ã€‚
ä»»åŠ¡ï¼š è¯·å†™ä¸€æ¡ SQL è¯­å¥ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»·æ ¼é«˜äºâ€œç”µè§†æœºâ€ çš„å•†å“ã€‚

æç¤ºæ€è·¯ï¼š
æˆ‘ä¸çŸ¥é“â€œç”µè§†æœºâ€å¤šå°‘é’±ï¼Œæ‰€ä»¥è¦å…ˆæŸ¥ç”µè§†æœºçš„ä»·æ ¼ï¼š(SELECT price FROM products WHERE name = 'ç”µè§†æœº')ã€‚
æŠŠè¿™ä¸ªæ‹¬å·æ”¾åˆ° WHERE åé¢å»æ¯”è¾ƒã€‚

SELECT * FROM products
WHERE price > (SELECT price FROM products WHERE name = 'ç”µè§†æœº');


#2ï¼šåˆ—è¡¨å­æŸ¥è¯¢ (IN)

åˆšæ‰é‚£ä¸ªä¾‹å­ï¼Œå†…å±‚æŸ¥è¯¢åªè¿”å›äº†ä¸€ä¸ªæ•°å­—ï¼ˆç”µè§†æœºçš„ä»·æ ¼ï¼‰ã€‚
ä½†å¦‚æœå†…å±‚æŸ¥è¯¢è¿”å›äº†ä¸€å †æ•°æ®ï¼Œæ€ä¹ˆåŠï¼Ÿ

æˆ‘ä»¬è¦æ‰¾å‡ºæ‰€æœ‰å±äºâ€œè‰ºæœ¯ç³»â€çš„å­¦ç”Ÿã€‚
æˆ‘ä»¬æœ‰ä¸¤å¼ è¡¨ï¼š

1. studentsï¼š(id, name, class\_id)
2. classesï¼š(id, department)

æ€è·¯ï¼š
1.å†…å±‚ï¼šå…ˆä» classes è¡¨é‡Œï¼Œæ‰¾å‡ºæ‰€æœ‰å±äº 'è‰ºæœ¯ç³»'çš„ç­çº§ IDã€‚ï¼ˆå¯èƒ½æœ‰å¥½å‡ ä¸ªç­ï¼Œæ¯”å¦‚ 101, 102, 105...ï¼‰
2.å¤–å±‚ï¼šåœ¨ studentsè¡¨é‡Œï¼Œæ‰¾å‡ºclass_idåœ¨è¿™ä¸ªåˆ—è¡¨é‡Œçš„å­¦ç”Ÿã€‚

è¿™æ—¶å€™ï¼Œä¸èƒ½ç”¨ `=`ï¼ˆç­‰äºï¼‰ï¼Œå› ä¸ºç­‰äºå·ä¸€æ¬¡åªèƒ½å¯¹ä¸€ä¸ªæ•°ã€‚
æˆ‘ä»¬è¦ç”¨ INï¼ˆåœ¨...é‡Œé¢ï¼‰ã€‚

è¯­æ³•ç»“æ„ï¼š

SELECT ... FROM ...
WHERE å…³è”åˆ— IN (SELECT å…³è”åˆ— FROM ... WHERE ...);


ä¾‹2ï¼šè¯·å†™å‡ºæŸ¥è¯¢è¯­å¥ï¼Œæ‰¾å‡º `class_id` å±äº (ä» classes è¡¨æŸ¥å‡ºçš„ 'è‰ºæœ¯ç³»' çš„ id) çš„æ‰€æœ‰å­¦ç”Ÿå§“åã€‚
(æç¤ºï¼šå¤–å±‚æŸ¥ studentsï¼Œå†…å±‚æŸ¥ classes)
SELECT * FROM students
WHERE class_id IN (
    SELECT id             -- 1. æˆ‘ä»¬è¦æŠŠç­çº§çš„ ID æ‹¿å‡ºæ¥
    FROM classes
    WHERE department = 'è‰ºæœ¯ç³»' -- 2. ç­›é€‰æ¡ä»¶æ˜¯éƒ¨é—¨åç§°
);




```



```basj
å®‰å…¨é” (Foreign Keys) 

åœºæ™¯å±æœºï¼š
æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæœ‰ç²—å¿ƒçš„å‘˜å·¥å¾€ studentsè¡¨é‡Œå½•å…¥äº†ä¸€ä¸ªå­¦ç”Ÿï¼Œå¡«å†™çš„ class_idæ˜¯ 999ã€‚
å¯æ˜¯ï¼classesè¡¨é‡Œæ ¹æœ¬å°±æ²¡æœ‰ 999 ç­ï¼

  * è¿™å°±å« â€œè„æ•°æ®â€
  * å¦‚æœè¿™ç§æ•°æ®å¤šäº†ï¼Œä½ çš„JOINæŸ¥è¯¢å°±ä¼šå¤±æ•ˆï¼ˆå› ä¸ºè¿ä¸ä¸Šï¼‰ï¼ŒæŠ¥è¡¨å°±ä¼šå‡ºé”™ã€‚

è§£å†³æ–¹æ¡ˆï¼šå¤–é”®çº¦æŸ (FOREIGN KEY)
å¤–é”®å°±åƒä¸€æ¡æ— å½¢çš„é“¾å­ï¼ŒæŠŠ studentsè¡¨çš„class_idç‰¢ç‰¢åœ°é”åœ¨classesè¡¨çš„idä¸Šã€‚
  * è§„åˆ™ï¼šä½ æƒ³åœ¨studentsè¡¨é‡Œå¡« class_idï¼Ÿå¯ä»¥ï¼Œä½†ä½ å¡«çš„è¿™ä¸ªæ•°å­—ï¼Œå¿…é¡»æ˜¯classesè¡¨é‡Œå·²ç»å­˜åœ¨çš„idã€‚å¦åˆ™ï¼Œæ•°æ®åº“ç›´æ¥æŠ¥é”™ï¼Œæ‹’ç»å½•å…¥ï¼

è¯­æ³•ç»“æ„ï¼ˆåœ¨å»ºè¡¨æ—¶ä½¿ç”¨ï¼‰

CREATE TABLE students (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    class_id INT,
    -- ä¸‹é¢è¿™å¥æ˜¯é‡ç‚¹ï¼š
    FOREIGN KEY (class_id) REFERENCES classes(id)
);

  * FOREIGN KEY (class_id)ï¼šæŒ‡å®šå½“å‰è¡¨å“ªä¸€åˆ—æ˜¯å¤–é”®ã€‚
  * REFERENCES classes(id)ï¼šæŒ‡å®šå®ƒâ€œå¼•ç”¨â€æˆ–è€…æ˜¯â€œä¾èµ–â€å“ªå¼ è¡¨çš„å“ªä¸€åˆ—ã€‚

ä¾‹1ï¼šç°åœ¨ï¼Œè¯·ä½ ä½œä¸ºé¦–å¸­æ•°æ®åº“æ¶æ„å¸ˆï¼Œè®¾è®¡ä¸€å¼ orders(è®¢å•è¡¨)
è¦æ±‚ï¼š
1.  idï¼šæ•´æ•°ï¼Œä¸»é”®ã€‚
2.  user_idï¼šæ•´æ•°ã€‚å…³é”®ç‚¹ï¼šè¿™ä¸€åˆ—å¿…é¡»æ˜¯å¤–é”®ï¼Œå…³è”åˆ° usersè¡¨çš„idåˆ—ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»æ˜¯å­˜åœ¨çš„ç”¨æˆ·æ‰èƒ½ä¸‹è®¢å•ï¼‰
è¯·å°è¯•å†™å‡ºè¿™ä¸ªå¸¦æœ‰å¤–é”®çš„ CREATE TABLEè¯­å¥ï¼
(æç¤ºï¼šFOREIGN KEY (æœ¬è¡¨åˆ—å) REFERENCES å¯¹æ–¹è¡¨å(å¯¹æ–¹åˆ—å))

CREATE TABLE orders (
    id INT PRIMARY KEY,
    user_id INT,       -- ç¬¬ä¸€æ­¥ï¼šå…ˆåˆ›å»ºè¿™ä¸€åˆ—ï¼
    -- name VARCHAR(50), -- (è¿™ä¸€åˆ—å¯è¦å¯ä¸è¦)
    
    -- ç¬¬äºŒæ­¥ï¼šå†ç»™è¿™ä¸€åˆ—åŠ é”
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```



```bash
æ€»ç»“
# ğŸ“œ MySQL SQL æé€Ÿé€ŸæŸ¥è¡¨ (Cheat Sheet)

### 1\. åŸºç¡€å››ä»¶å¥— (CRUD)

æœ€å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥ã€‚

| æ“ä½œ | è¯­æ³•ç¤ºä¾‹ | è¯´æ˜ |
| :--- | :--- | :--- |
| **å¢ (Create)** | `INSERT INTO students (name, score) VALUES ('å¼ ä¸‰', 90);` | è®°å¾—åˆ—åå’Œå€¼è¦ä¸€ä¸€å¯¹åº”ã€‚ |
| **åˆ  (Delete)** | `DELETE FROM students WHERE name = 'æå››';` | **è­¦æŠ¥ï¼š** æ²¡å†™ WHERE ä¼šåˆ å…‰å…¨è¡¨ï¼ |
| **æ”¹ (Update)** | `UPDATE students SET score = 100 WHERE name = 'å¼ ä¸‰';` | **è­¦æŠ¥ï¼š** æ²¡å†™ WHERE ä¼šæ”¹å…¨è¡¨ï¼ |
| **æŸ¥ (Read)** | `SELECT * FROM students;` | `*` ä»£è¡¨æ‰€æœ‰åˆ—ã€‚ |

### 2\. ç­›é€‰ä¸æ’åº (Filtering & Sorting)

ç²¾å‡†æ‰¾åˆ°ä½ æƒ³è¦çš„æ•°æ®ã€‚

  * **ç²¾ç¡®æŸ¥æ‰¾**ï¼š`WHERE score = 100`
  * **å¤šæ¡ä»¶**ï¼š`WHERE score > 60 AND gender = 'ç”·'`
  * **èŒƒå›´æŸ¥æ‰¾**ï¼š`WHERE score BETWEEN 80 AND 90`
  * **åˆ—è¡¨æŸ¥æ‰¾**ï¼š`WHERE name IN ('å¼ ä¸‰', 'æå››')`
  * **æ¨¡ç³Šæœç´¢**ï¼š`WHERE name LIKE 'å¼ %'` (å§“å¼ çš„ï¼Œåé¢è·Ÿä»»æ„å­—ç¬¦)
  * **æ’åº**ï¼š`ORDER BY score DESC` (é™åºï¼šå¤§â†’å°) / `ASC` (å‡åºï¼šå°â†’å¤§)
  * **é™åˆ¶æ•°é‡**ï¼š`LIMIT 3` (åªçœ‹å‰ 3 ä¸ª)

### 3\. æ•°æ®ç»Ÿè®¡ (Aggregation)

åšæŠ¥è¡¨å¿…å¤‡ã€‚

  * **è®¡æ•°**ï¼š`COUNT(*)` (æ•°æœ‰å¤šå°‘è¡Œ)
  * **å¹³å‡å€¼**ï¼š`AVG(score)`
  * **æœ€å¤§/å°**ï¼š`MAX(score)` / `MIN(score)`
  * **å»é‡**ï¼š`DISTINCT name` (å»æ‰é‡å¤çš„åå­—)
  * **åˆ†ç»„ç»Ÿè®¡**ï¼š
   
    SELECT class, AVG(score) FROM students
    GROUP BY class           -- æŒ‰ç­çº§åˆ†ç»„
    HAVING AVG(score) > 80;  -- ç­›é€‰åˆ†ç»„åçš„ç»“æœ (ä¸ç”¨ WHERE!)
```

### 4\. å¤šè¡¨è¿æ¥ (Joins)

æŠŠæ•£è½åœ¨ä¸åŒè¡¨çš„æ•°æ®æ‹¼èµ·æ¥ã€‚

  * **å†…è¿æ¥ (INNER JOIN)**ï¼š**â€œäº¤é›†â€**ã€‚ä¸¤è¾¹éƒ½æœ‰æ‰æ˜¾ç¤ºã€‚
    ```sql
    SELECT s.name, c.teacher 
    FROM students s
    INNER JOIN classes c ON s.class_id = c.id;
    ```
  * **å·¦è¿æ¥ (LEFT JOIN)**ï¼š**â€œå·¦è¾¹ä¸ºä¸»â€**ã€‚ä¸ç®¡å³è¾¹æœ‰æ²¡æœ‰ï¼Œå·¦è¾¹å…¨ä¿ç•™ï¼ˆå³è¾¹æ‰¾ä¸åˆ°å¡« NULLï¼‰ã€‚
    ```sql
    SELECT s.name, c.teacher 
    FROM students s
    LEFT JOIN classes c ON s.class_id = c.id;
    ```

### 5\. è¡¨ç»“æ„ç®¡ç† (DDL)

æ¶æ„å¸ˆæŠ€èƒ½åŒ…ã€‚

  * **å»ºè¡¨ (Create)**ï¼š
    ```sql
    CREATE TABLE users (
        id INT PRIMARY KEY AUTO_INCREMENT, -- ä¸»é”®ï¼Œè‡ªåŠ¨å¢é•¿
        name VARCHAR(50) NOT NULL,         -- å¿…å¡«
        class_id INT
    );
    ```
  * **ä¿®æ”¹è¡¨ (Alter)**ï¼š
      * **åŠ åˆ—**ï¼š`ALTER TABLE users ADD age INT;`
      * **æ”¹åˆ—**ï¼š`ALTER TABLE users MODIFY name VARCHAR(100);`
      * **åˆ åˆ—**ï¼š`ALTER TABLE users DROP COLUMN age;`
  * **åˆ è¡¨ (Drop)**ï¼š`DROP TABLE users;` (æ…ç”¨ï¼æ•°æ®å…¨æ²¡)

### 6\. è¿›é˜¶é»‘ç§‘æŠ€ (Advanced)

æå‡æ€§èƒ½ä¸é€»è¾‘ã€‚

  * **åˆ›å»ºç´¢å¼• (æé€Ÿ)**ï¼š
    `CREATE INDEX idx_name ON users (name);`
  * **å­æŸ¥è¯¢ (å¥—å¨ƒ)**ï¼š
    ```sql
    -- æ‰¾å‡ºæ¯”å¹³å‡åˆ†é«˜çš„äºº
    SELECT * FROM students 
    WHERE score > (SELECT AVG(score) FROM students);
    ```
  * **å¤–é”® (å®‰å…¨é”)**ï¼š
    åœ¨ `CREATE TABLE` æ—¶ä½¿ç”¨ï¼š
    `FOREIGN KEY (class_id) REFERENCES classes(id)`

